<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="author" content="Xavier Nodet">
<title>gurobipy: Solutions</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge, pre.rouge .w {
  color: #444444;
}
pre.rouge .cp {
  color: #CC00A3;
}
pre.rouge .cs {
  color: #CC00A3;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cm, pre.rouge .cpf, pre.rouge .c1 {
  color: #FF0000;
}
pre.rouge .kc {
  color: #C34E00;
}
pre.rouge .kd {
  color: #0000FF;
}
pre.rouge .kr {
  color: #007575;
}
pre.rouge .k, pre.rouge .kn, pre.rouge .kp, pre.rouge .kt, pre.rouge .kv {
  color: #0000FF;
}
pre.rouge .s, pre.rouge .sb, pre.rouge .sc, pre.rouge .dl, pre.rouge .sd, pre.rouge .s2, pre.rouge .se, pre.rouge .sh, pre.rouge .si, pre.rouge .sx, pre.rouge .sr, pre.rouge .s1, pre.rouge .ss {
  color: #009C00;
}
pre.rouge .sa {
  color: #0000FF;
}
pre.rouge .nb, pre.rouge .bp {
  color: #C34E00;
}
</style>
</head>
<body class="article">
<div id="header">
<h1><code>gurobipy</code>: Solutions</h1>
<div class="details">
<span id="author" class="author">Xavier Nodet</span><br>
<span id="email" class="email"><a href="mailto:xavier.nodet@gurobi.com">xavier.nodet@gurobi.com</a></span><br>
<span id="revdate">January 2025  - 9be5890</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table des matières</div>
<ul class="sectlevel1">
<li><a href="#_knapsack">1. Knapsack</a></li>
<li><a href="#_portfolio_optimization">2. Portfolio Optimization</a></li>
<li><a href="#_termination_criteria">3. Termination Criteria</a></li>
<li><a href="#_unit_commitment_problem">4. Unit Commitment Problem</a></li>
<li><a href="#_unit_commitment_problem_matrix_api">5. Unit Commitment Problem (matrix API)</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_knapsack">1. Knapsack</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>

<span class="k">def</span> <span class="nf">generate_knapsack</span><span class="p">(</span><span class="n">num_items</span><span class="p">):</span>
    <span class="c1"># Fix seed value
</span>    <span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">default_rng</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="c1"># Item values, weights
</span>    <span class="n">values</span> <span class="o">=</span> <span class="n">rng</span><span class="p">.</span><span class="nf">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">num_items</span><span class="p">)</span>
    <span class="n">weights</span> <span class="o">=</span> <span class="n">rng</span><span class="p">.</span><span class="nf">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">num_items</span><span class="p">)</span>
    <span class="c1"># Knapsack capacity
</span>    <span class="n">capacity</span> <span class="o">=</span> <span class="mf">0.7</span> <span class="o">*</span> <span class="n">weights</span><span class="p">.</span><span class="nf">sum</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">values</span><span class="p">,</span> <span class="n">weights</span><span class="p">,</span> <span class="n">capacity</span>


<span class="k">def</span> <span class="nf">solve_knapsack_model</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">weights</span><span class="p">,</span> <span class="n">capacity</span><span class="p">):</span>
    <span class="n">num_items</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
    <span class="c1"># Turn values and weights numpy arrays to dict
</span>    <span class="n">values_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">values</span><span class="p">)}</span>
    <span class="n">weights_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span><span class="p">:</span> <span class="n">weight</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">weight</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">weights</span><span class="p">)}</span>

    <span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Env</span><span class="p">()</span> <span class="k">as</span> <span class="n">env</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">knapsack</span><span class="sh">"</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>
            <span class="c1"># Define decision variables using the Model.addVars() method
</span>            <span class="n">x</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVars</span><span class="p">(</span><span class="n">num_items</span><span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">BINARY</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">x</span><span class="sh">"</span><span class="p">)</span>

            <span class="c1"># Define objective function using the Model.setObjective() method
</span>            <span class="c1"># Build the LinExpr using the tupledict.prod() method
</span>            <span class="n">model</span><span class="p">.</span><span class="nf">setObjective</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="nf">prod</span><span class="p">(</span><span class="n">values_dict</span><span class="p">),</span> <span class="n">sense</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">MAXIMIZE</span><span class="p">)</span>

            <span class="c1"># Define capacity constraint using the Model.addConstr() method
</span>            <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="nf">prod</span><span class="p">(</span><span class="n">weights_dict</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">knapsack_capacity</span><span class="sh">"</span><span class="p">)</span>

            <span class="n">model</span><span class="p">.</span><span class="nf">optimize</span><span class="p">()</span>

<span class="n">data</span> <span class="o">=</span> <span class="nf">generate_knapsack</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<span class="nf">solve_knapsack_model</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the log of the execution of this program:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Gurobi Optimizer version 12.0.0 build v12.0.0rc1 (mac64[arm] - Darwin 24.2.0 24C101)

CPU model: Apple M1 Pro
Thread count: 8 physical cores, 8 logical processors, using up to 8 threads

Optimize a model with 1 rows, 10000 columns and 10000 nonzeros
Model fingerprint: 0xa2a6b3bf
Variable types: 0 continuous, 10000 integer (10000 binary)
Coefficient statistics:
  Matrix range     [5e+00, 1e+02]
  Objective range  [1e+00, 2e+01]
  Bounds range     [1e+00, 1e+00]
  RHS range        [4e+05, 4e+05]
Found heuristic solution: objective 90594.480679
Presolve time: 0.01s
Presolved: 1 rows, 10000 columns, 10000 nonzeros
Variable types: 0 continuous, 10000 integer (10000 binary)

Root relaxation: objective 1.190206e+05, 1 iterations, 0.00 seconds (0.00 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0 119020.617    0    1 90594.4807 119020.617  31.4%     -    0s
H    0     0                    119005.88462 119020.617  0.01%     -    0s
H    0     0                    119015.22254 119020.617  0.00%     -    0s

Explored 1 nodes (1 simplex iterations) in 0.04 seconds (0.02 work units)
Thread count was 8 (of 8 available processors)

Solution count 3: 119015 119006 90594.5 

Optimal solution found (tolerance 1.00e-04)
Best objective 1.190152225370e+05, best bound 1.190206174693e+05, gap 0.0045%</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_portfolio_optimization">2. Portfolio Optimization</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">json</span>
<span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>

<span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="sh">"</span><span class="s">data/portfolio-example.json</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">r</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="n">n</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="sh">"</span><span class="s">num_assets</span><span class="sh">"</span><span class="p">]</span>
<span class="n">sigma</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="sh">"</span><span class="s">covariance</span><span class="sh">"</span><span class="p">])</span>
<span class="n">mu</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="sh">"</span><span class="s">expected_return</span><span class="sh">"</span><span class="p">])</span>
<span class="n">mu_0</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="sh">"</span><span class="s">target_return</span><span class="sh">"</span><span class="p">]</span>
<span class="n">k</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="sh">"</span><span class="s">portfolio_max_size</span><span class="sh">"</span><span class="p">]</span>


<span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">(</span><span class="sh">"</span><span class="s">portfolio</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVars</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">x</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVars</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">BINARY</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">y</span><span class="sh">"</span><span class="p">)</span>

    <span class="n">risk</span> <span class="o">=</span> <span class="n">gp</span><span class="p">.</span><span class="nf">quicksum</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">sigma</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
    <span class="n">model</span><span class="p">.</span><span class="nf">setObjective</span><span class="p">(</span><span class="n">risk</span><span class="p">)</span>

    <span class="n">expected_return</span> <span class="o">=</span> <span class="n">gp</span><span class="p">.</span><span class="nf">quicksum</span><span class="p">(</span><span class="n">mu</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
    <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span><span class="n">expected_return</span> <span class="o">&gt;=</span> <span class="n">mu_0</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">return</span><span class="sh">"</span><span class="p">)</span>

    <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="nf">sum</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">budget</span><span class="sh">"</span><span class="p">)</span>

    <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="nf">sum</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="n">k</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">cardinality</span><span class="sh">"</span><span class="p">)</span>

    <span class="n">model</span><span class="p">.</span><span class="nf">addConstrs</span><span class="p">((</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n</span><span class="p">)),</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">is_allocated</span><span class="sh">"</span><span class="p">)</span>

    <span class="n">model</span><span class="p">.</span><span class="nf">optimize</span><span class="p">()</span>

    <span class="c1"># Write the solution into a DataFrame
</span>    <span class="n">portfolio</span> <span class="o">=</span> <span class="p">[</span><span class="n">var</span><span class="p">.</span><span class="n">X</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">model</span><span class="p">.</span><span class="nf">getVars</span><span class="p">()</span> <span class="k">if</span> <span class="sh">"</span><span class="s">x</span><span class="sh">"</span> <span class="ow">in</span> <span class="n">var</span><span class="p">.</span><span class="n">VarName</span><span class="p">]</span>
    <span class="n">risk</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="n">ObjVal</span>
    <span class="n">expected_return</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">getRow</span><span class="p">(</span><span class="n">model</span><span class="p">.</span><span class="nf">getConstrByName</span><span class="p">(</span><span class="sh">"</span><span class="s">return</span><span class="sh">"</span><span class="p">)).</span><span class="nf">getValue</span><span class="p">()</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nc">DataFrame</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">portfolio</span> <span class="o">+</span> <span class="p">[</span><span class="n">risk</span><span class="p">,</span> <span class="n">expected_return</span><span class="p">],</span>
        <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="sa">f</span><span class="sh">"</span><span class="s">asset_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="sh">"</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span> <span class="o">+</span> <span class="p">[</span><span class="sh">"</span><span class="s">risk</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">return</span><span class="sh">"</span><span class="p">],</span>
        <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sh">"</span><span class="s">Portfolio</span><span class="sh">"</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the log of the execution of this program:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Gurobi Optimizer version 12.0.0 build v12.0.0rc1 (mac64[arm] - Darwin 24.2.0 24C101)

CPU model: Apple M1 Pro
Thread count: 8 physical cores, 8 logical processors, using up to 8 threads

Optimize a model with 23 rows, 40 columns and 100 nonzeros
Model fingerprint: 0x755216b2
Model has 210 quadratic objective terms
Variable types: 20 continuous, 20 integer (20 binary)
Coefficient statistics:
  Matrix range     [1e-04, 1e+00]
  Objective range  [0e+00, 0e+00]
  QObjective range [7e-06, 4e-03]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e-04, 2e+01]
Found heuristic solution: objective 0.0000960
Presolve time: 0.00s
Presolved: 23 rows, 40 columns, 100 nonzeros
Presolved model has 210 quadratic objective terms
Variable types: 20 continuous, 20 integer (20 binary)

Root relaxation: objective 6.741224e-05, 38 iterations, 0.00 seconds (0.00 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0    0.00007    0   11    0.00010    0.00007  29.8%     -    0s
H    0     0                       0.0000674    0.00007  0.00%     -    0s
     0     0    0.00007    0   11    0.00007    0.00007  0.00%     -    0s

Explored 1 nodes (38 simplex iterations) in 0.01 seconds (0.00 work units)
Thread count was 8 (of 8 available processors)

Solution count 2: 6.74122e-05 9.60284e-05 

Optimal solution found (tolerance 1.00e-04)
Best objective 6.741224163915e-05, best bound 6.741224163915e-05, gap 0.0000%
          Portfolio
asset_0    0.000000
asset_1    0.000000
asset_2    0.000000
asset_3    0.000000
asset_4    0.006812
asset_5    0.034594
asset_6    0.000000
asset_7    0.000000
asset_8    0.409840
asset_9    0.026759
asset_10   0.000000
asset_11   0.027722
asset_12   0.039911
asset_13   0.030221
asset_14   0.038511
asset_15   0.000000
asset_16   0.184718
asset_17   0.000000
asset_18   0.126673
asset_19   0.074241
risk       0.000067
return     0.000104</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_termination_criteria">3. Termination Criteria</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">from</span> <span class="n">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>


<span class="k">class</span> <span class="nc">CallbackData</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">last_gap_change_time</span> <span class="o">=</span> <span class="o">-</span><span class="n">GRB</span><span class="p">.</span><span class="n">INFINITY</span>
        <span class="n">self</span><span class="p">.</span><span class="n">last_gap</span> <span class="o">=</span> <span class="n">GRB</span><span class="p">.</span><span class="n">INFINITY</span>


<span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">where</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">cbdata</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">where</span> <span class="o">!=</span> <span class="n">GRB</span><span class="p">.</span><span class="n">Callback</span><span class="p">.</span><span class="n">MIP</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">model</span><span class="p">.</span><span class="nf">cbGet</span><span class="p">(</span><span class="n">GRB</span><span class="p">.</span><span class="n">Callback</span><span class="p">.</span><span class="n">MIP_SOLCNT</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="n">best</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">cbGet</span><span class="p">(</span><span class="n">GRB</span><span class="p">.</span><span class="n">Callback</span><span class="p">.</span><span class="n">MIP_OBJBST</span><span class="p">)</span>
    <span class="n">bound</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">cbGet</span><span class="p">(</span><span class="n">GRB</span><span class="p">.</span><span class="n">Callback</span><span class="p">.</span><span class="n">MIP_OBJBND</span><span class="p">)</span>
    <span class="n">gap</span> <span class="o">=</span> <span class="nf">abs</span><span class="p">((</span><span class="n">bound</span> <span class="o">-</span> <span class="n">best</span><span class="p">)</span> <span class="o">/</span> <span class="n">best</span><span class="p">)</span>
    <span class="n">time</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">cbGet</span><span class="p">(</span><span class="n">GRB</span><span class="p">.</span><span class="n">Callback</span><span class="p">.</span><span class="n">RUNTIME</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">gap</span> <span class="o">&lt;</span> <span class="n">cbdata</span><span class="p">.</span><span class="n">last_gap</span> <span class="o">-</span> <span class="n">epsilon_to_compare_gap</span><span class="p">:</span>
        <span class="c1"># The gap has decreased, store new gap and reset the time
</span>        <span class="n">cbdata</span><span class="p">.</span><span class="n">last_gap</span> <span class="o">=</span> <span class="n">gap</span>
        <span class="n">cbdata</span><span class="p">.</span><span class="n">last_gap_change_time</span> <span class="o">=</span> <span class="n">time</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Storing new gap: </span><span class="si">{</span><span class="n">gap</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">time</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">time</span> <span class="o">-</span> <span class="n">cbdata</span><span class="p">.</span><span class="n">last_gap_change_time</span> <span class="o">&gt;</span> <span class="n">time_from_best</span><span class="p">:</span>
        <span class="c1"># No change since too long
</span>        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">It</span><span class="sh">'</span><span class="s">s been too long...</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">model</span><span class="p">.</span><span class="nf">terminate</span><span class="p">()</span>


<span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="sh">"</span><span class="s">data/mkp.mps.bz2</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>
    <span class="c1"># Global variables used in the callback function
</span>    <span class="n">time_from_best</span> <span class="o">=</span> <span class="mi">15</span>
    <span class="n">epsilon_to_compare_gap</span> <span class="o">=</span> <span class="mf">1e-4</span>

    <span class="c1"># Initialize data passed to the callback function
</span>    <span class="n">callback_data</span> <span class="o">=</span> <span class="nc">CallbackData</span><span class="p">()</span>
    <span class="n">callback_func</span> <span class="o">=</span> <span class="nf">partial</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span> <span class="n">cbdata</span><span class="o">=</span><span class="n">callback_data</span><span class="p">)</span>

    <span class="n">model</span><span class="p">.</span><span class="nf">optimize</span><span class="p">(</span><span class="n">callback_func</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the log of the execution of this program:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Read MPS format model from file data/mkp.mps.bz2
Reading time = 0.08 seconds
mkp_bip: 30 rows, 500 columns, 15000 nonzeros
Gurobi Optimizer version 12.0.0 build v12.0.0rc1 (mac64[arm] - Darwin 24.2.0 24C101)

CPU model: Apple M1 Pro
Thread count: 8 physical cores, 8 logical processors, using up to 8 threads

Optimize a model with 30 rows, 500 columns and 15000 nonzeros
Model fingerprint: 0xcbe37219
Variable types: 0 continuous, 500 integer (500 binary)
Coefficient statistics:
  Matrix range     [1e+00, 1e+03]
  Objective range  [4e+02, 1e+03]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e+05, 1e+05]
Found heuristic solution: objective 177106.00000
Presolve time: 0.02s
Presolved: 30 rows, 500 columns, 15000 nonzeros
Variable types: 0 continuous, 500 integer (500 binary)
Storing new gap: 1.0921143270132012, 0.017262935638427734

Root relaxation: objective 2.164011e+05, 112 iterations, 0.00 seconds (0.01 work units)
Storing new gap: 0.22187277675516356, 0.019961833953857422

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0 216401.065    0   25 177106.000 216401.065  22.2%     -    0s
H    0     0                    209908.00000 216401.065  3.09%     -    0s
H    0     0                    213709.00000 216401.065  1.26%     -    0s
H    0     0                    215225.00000 216401.065  0.55%     -    0s
H    0     0                    215436.00000 216401.065  0.45%     -    0s
H    0     0                    215510.00000 216401.065  0.41%     -    0s
H    0     0                    215624.00000 216401.065  0.36%     -    0s
Storing new gap: 0.0035756687567246688, 0.10744595527648926
     0     0 216395.201    0   25 215624.000 216395.201  0.36%     -    0s
H    0     0                    215635.00000 216395.201  0.35%     -    0s
H    0     2                    215645.00000 216395.201  0.35%     -    0s
     0     2 216395.201    0   25 215645.000 216395.201  0.35%     -    0s
H   85    88                    215666.00000 216395.201  0.34%   8.8    0s
Storing new gap: 0.003380226832231321, 0.2916560173034668
H  162   166                    215707.00000 216395.201  0.32%   9.4    0s
Storing new gap: 0.0031895116987394937, 0.3267650604248047
H 2099  1932                    215727.00000 216389.474  0.31%   7.0    0s
Storing new gap: 0.0030686933021828516, 0.931596040725708
H20129 16350                    215731.00000 216372.312  0.30%   8.0    2s
Storing new gap: 0.0029620221479527745, 2.281609058380127
 42889 33474 215902.531  167   16 215731.000 216367.041  0.29%   8.2    5s
H50272 34121                    215821.00000 216367.041  0.25%   8.1    5s
Storing new gap: 0.0025298742939750996, 5.435669898986816
 141488 98074 216081.837   81   26 215821.000 216348.623  0.24%   8.5   10s
Storing new gap: 0.002427937967111634, 11.63235592842102
 235607 181014 215990.956  111   20 215821.000 216341.638  0.24%   8.8   15s
 331517 265039 216255.272   53   26 215821.000 216337.162  0.24%   9.0   20s
 433311 353397 216225.832   48   25 215821.000 216333.538  0.24%   9.1   25s
It's been too long...

Cutting planes:
  Gomory: 7

Explored 460508 nodes (4197920 simplex iterations) in 26.65 seconds (73.49 work units)
Thread count was 8 (of 8 available processors)

Solution count 10: 215821 215731 215727 ... 215436

Solve interrupted
Best objective 2.158210000000e+05, best bound 2.163320000000e+05, gap 0.2368%

User-callback calls 924653, time in user-callback 1.03 sec</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_unit_commitment_problem">4. Unit Commitment Problem</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>


<span class="c1"># 24 Hour Load Forecast (MW)
</span><span class="n">load_forecast</span> <span class="o">=</span> <span class="p">[</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">6</span><span class="p">,</span>
    <span class="mi">6</span><span class="p">,</span>
    <span class="mi">12</span><span class="p">,</span>
    <span class="mi">12</span><span class="p">,</span>
    <span class="mi">12</span><span class="p">,</span>
    <span class="mi">12</span><span class="p">,</span>
    <span class="mi">12</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">16</span><span class="p">,</span>
    <span class="mi">16</span><span class="p">,</span>
    <span class="mi">16</span><span class="p">,</span>
    <span class="mi">16</span><span class="p">,</span>
    <span class="mf">6.5</span><span class="p">,</span>
    <span class="mf">6.5</span><span class="p">,</span>
    <span class="mf">6.5</span><span class="p">,</span>
<span class="p">]</span>

<span class="c1"># solar energy forecast (MW)
</span><span class="n">solar_forecast</span> <span class="o">=</span> <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.5</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">1.5</span><span class="p">,</span>
    <span class="mf">2.0</span><span class="p">,</span>
    <span class="mf">2.5</span><span class="p">,</span>
    <span class="mf">3.5</span><span class="p">,</span>
    <span class="mf">3.5</span><span class="p">,</span>
    <span class="mf">2.5</span><span class="p">,</span>
    <span class="mf">2.0</span><span class="p">,</span>
    <span class="mf">1.5</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">0.5</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
<span class="p">]</span>

<span class="c1"># global number of time intervals
</span><span class="n">nTimeIntervals</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">load_forecast</span><span class="p">)</span>

<span class="c1"># thermal units
</span><span class="n">thermal_units</span> <span class="o">=</span> <span class="p">[</span><span class="sh">"</span><span class="s">gen1</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">gen2</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">gen3</span><span class="sh">"</span><span class="p">]</span>

<span class="c1"># thermal units' costs  (a + b*p + c*p^2), (startup and shutdown costs)
</span><span class="n">thermal_units_cost</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">sup_cost</span><span class="p">,</span> <span class="n">sdn_cost</span> <span class="o">=</span> <span class="n">gp</span><span class="p">.</span><span class="nf">multidict</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="sh">"</span><span class="s">gen1</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
        <span class="sh">"</span><span class="s">gen2</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
        <span class="sh">"</span><span class="s">gen3</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="c1"># thernal units operating limits
</span><span class="n">thermal_units_limits</span><span class="p">,</span> <span class="n">pmin</span><span class="p">,</span> <span class="n">pmax</span> <span class="o">=</span> <span class="n">gp</span><span class="p">.</span><span class="nf">multidict</span><span class="p">(</span>
    <span class="p">{</span><span class="sh">"</span><span class="s">gen1</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">],</span> <span class="sh">"</span><span class="s">gen2</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">],</span> <span class="sh">"</span><span class="s">gen3</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]}</span>
<span class="p">)</span>

<span class="c1"># thermal units dynamic data (initial commitment status)
</span><span class="n">thermal_units_dyn_data</span><span class="p">,</span> <span class="n">init_status</span> <span class="o">=</span> <span class="n">gp</span><span class="p">.</span><span class="nf">multidict</span><span class="p">(</span>
    <span class="p">{</span><span class="sh">"</span><span class="s">gen1</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="sh">"</span><span class="s">gen2</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="sh">"</span><span class="s">gen3</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">]}</span>
<span class="p">)</span>


<span class="k">def</span> <span class="nf">show_results</span><span class="p">():</span>
    <span class="n">obj_val_s</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="n">ObjVal</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s"> OverAll Cost = </span><span class="si">{</span><span class="nf">round</span><span class="p">(</span><span class="n">obj_val_s</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s">	</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">%5s</span><span class="sh">"</span> <span class="o">%</span> <span class="sh">"</span><span class="s">time</span><span class="sh">"</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">nTimeIntervals</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">%4s</span><span class="sh">"</span> <span class="o">%</span> <span class="n">t</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">thermal_units</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">%5s</span><span class="sh">"</span> <span class="o">%</span> <span class="n">g</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">nTimeIntervals</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">%4.1f</span><span class="sh">"</span> <span class="o">%</span> <span class="n">thermal_units_out_power</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">].</span><span class="n">X</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>

    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">%5s</span><span class="sh">"</span> <span class="o">%</span> <span class="sh">"</span><span class="s">Solar</span><span class="sh">"</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">nTimeIntervals</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">%4.1f</span><span class="sh">"</span> <span class="o">%</span> <span class="n">solar_forecast</span><span class="p">[</span><span class="n">t</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>

    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">%5s</span><span class="sh">"</span> <span class="o">%</span> <span class="sh">"</span><span class="s">Load</span><span class="sh">"</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">nTimeIntervals</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">%4.1f</span><span class="sh">"</span> <span class="o">%</span> <span class="n">load_forecast</span><span class="p">[</span><span class="n">t</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>


<span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Env</span><span class="p">()</span> <span class="k">as</span> <span class="n">env</span><span class="p">,</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">(</span><span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>

    <span class="c1"># add variables for thermal units (power and statuses for commitment, startup and shutdown)
</span>    <span class="n">thermal_units_out_power</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVars</span><span class="p">(</span>
        <span class="n">thermal_units</span><span class="p">,</span> <span class="n">nTimeIntervals</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">thermal_units_out_power</span><span class="sh">"</span>
    <span class="p">)</span>
    <span class="n">thermal_units_startup_status</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVars</span><span class="p">(</span>
        <span class="n">thermal_units</span><span class="p">,</span>
        <span class="n">nTimeIntervals</span><span class="p">,</span>
        <span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">BINARY</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">thermal_unit_startup_status</span><span class="sh">"</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">thermal_units_shutdown_status</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVars</span><span class="p">(</span>
        <span class="n">thermal_units</span><span class="p">,</span>
        <span class="n">nTimeIntervals</span><span class="p">,</span>
        <span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">BINARY</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">thermal_unit_shutdown_status</span><span class="sh">"</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">thermal_units_comm_status</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVars</span><span class="p">(</span>
        <span class="n">thermal_units</span><span class="p">,</span> <span class="n">nTimeIntervals</span><span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">BINARY</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">thermal_unit_comm_status</span><span class="sh">"</span>
    <span class="p">)</span>

    <span class="c1"># define objective function as an empty quadratic construct and add terms
</span>    <span class="n">obj_fun_expr</span> <span class="o">=</span> <span class="n">gp</span><span class="p">.</span><span class="nc">QuadExpr</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">nTimeIntervals</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">thermal_units</span><span class="p">:</span>
            <span class="n">obj_fun_expr</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span>
                <span class="n">a</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">*</span> <span class="n">thermal_units_comm_status</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span>
                <span class="o">+</span> <span class="n">b</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">*</span> <span class="n">thermal_units_out_power</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span>
                <span class="o">+</span> <span class="n">c</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">*</span> <span class="n">thermal_units_out_power</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span> <span class="o">*</span> <span class="n">thermal_units_out_power</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span>
                <span class="o">+</span> <span class="n">sup_cost</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">*</span> <span class="n">thermal_units_startup_status</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span>
                <span class="o">+</span> <span class="n">sdn_cost</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">*</span> <span class="n">thermal_units_shutdown_status</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span>
            <span class="p">)</span>
    <span class="n">model</span><span class="p">.</span><span class="nf">setObjective</span><span class="p">(</span><span class="n">obj_fun_expr</span><span class="p">)</span>

    <span class="c1"># Power balance equations
</span>    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">nTimeIntervals</span><span class="p">):</span>
        <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span>
            <span class="n">gp</span><span class="p">.</span><span class="nf">quicksum</span><span class="p">(</span><span class="n">thermal_units_out_power</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">thermal_units</span><span class="p">)</span>
            <span class="o">==</span> <span class="n">load_forecast</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">-</span> <span class="n">solar_forecast</span><span class="p">[</span><span class="n">t</span><span class="p">],</span>
            <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">power_balance_</span><span class="sh">"</span> <span class="o">+</span> <span class="nf">str</span><span class="p">(</span><span class="n">t</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="c1"># Thermal units logical constraints
</span>    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">nTimeIntervals</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">thermal_units</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">t</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span>
                    <span class="n">thermal_units_comm_status</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span> <span class="o">-</span> <span class="n">init_status</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
                    <span class="o">==</span> <span class="n">thermal_units_startup_status</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span>
                    <span class="o">-</span> <span class="n">thermal_units_shutdown_status</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">],</span>
                    <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">logical1_</span><span class="sh">"</span> <span class="o">+</span> <span class="n">g</span> <span class="o">+</span> <span class="sh">"</span><span class="s">_</span><span class="sh">"</span> <span class="o">+</span> <span class="nf">str</span><span class="p">(</span><span class="n">t</span><span class="p">),</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span>
                    <span class="n">thermal_units_comm_status</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span>
                    <span class="o">-</span> <span class="n">thermal_units_comm_status</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="o">==</span> <span class="n">thermal_units_startup_status</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span>
                    <span class="o">-</span> <span class="n">thermal_units_shutdown_status</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">],</span>
                    <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">logical1_</span><span class="sh">"</span> <span class="o">+</span> <span class="n">g</span> <span class="o">+</span> <span class="sh">"</span><span class="s">_</span><span class="sh">"</span> <span class="o">+</span> <span class="nf">str</span><span class="p">(</span><span class="n">t</span><span class="p">),</span>
                <span class="p">)</span>

            <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span>
                <span class="n">thermal_units_startup_status</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span> <span class="o">+</span> <span class="n">thermal_units_shutdown_status</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span>
                <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">logical2_</span><span class="sh">"</span> <span class="o">+</span> <span class="n">g</span> <span class="o">+</span> <span class="sh">"</span><span class="s">_</span><span class="sh">"</span> <span class="o">+</span> <span class="nf">str</span><span class="p">(</span><span class="n">t</span><span class="p">),</span>
            <span class="p">)</span>

    <span class="c1"># Thermal units physical constraints, using indicator constraints
</span>    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">nTimeIntervals</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">thermal_units</span><span class="p">:</span>
            <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span>
                <span class="p">(</span><span class="n">thermal_units_comm_status</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&gt;&gt;</span>
                <span class="p">(</span><span class="n">thermal_units_out_power</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">pmin</span><span class="p">[</span><span class="n">g</span><span class="p">])</span>
            <span class="p">)</span>
            <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span>
                <span class="p">(</span><span class="n">thermal_units_comm_status</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&gt;&gt;</span>
                <span class="p">(</span><span class="n">thermal_units_out_power</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">pmax</span><span class="p">[</span><span class="n">g</span><span class="p">])</span>
            <span class="p">)</span>
            <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span>
                <span class="p">(</span><span class="n">thermal_units_comm_status</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&gt;&gt;</span>
                <span class="p">(</span><span class="n">thermal_units_out_power</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">)</span>
            <span class="p">)</span>

    <span class="n">model</span><span class="p">.</span><span class="nf">optimize</span><span class="p">()</span>
    <span class="nf">show_results</span><span class="p">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the log of the execution of this program:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Gurobi Optimizer version 12.0.0 build v12.0.0rc1 (mac64[arm] - Darwin 24.2.0 24C101)

CPU model: Apple M1 Pro
Thread count: 8 physical cores, 8 logical processors, using up to 8 threads

Optimize a model with 168 rows, 288 columns and 501 nonzeros
Model fingerprint: 0xa1375406
Model has 72 quadratic objective terms
Model has 216 simple general constraints
  216 INDICATOR
Variable types: 72 continuous, 216 integer (216 binary)
Coefficient statistics:
  Matrix range     [1e+00, 1e+00]
  Objective range  [5e-01, 5e+00]
  QObjective range [1e+00, 4e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e+00, 2e+01]
  GenCon rhs range [1e+00, 1e+01]
  GenCon coe range [1e+00, 1e+00]
Presolve added 1 rows and 0 columns
Presolve removed 0 rows and 125 columns
Presolve time: 0.01s
Presolved: 185 rows, 171 columns, 473 nonzeros
Presolved model has 43 quadratic objective terms
Variable types: 51 continuous, 120 integer (120 binary)
Found heuristic solution: objective 1007.6964286
Found heuristic solution: objective 907.5714286

Root relaxation: objective 8.586741e+02, 287 iterations, 0.00 seconds (0.00 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0  858.67410    0   44  907.57143  858.67410  5.39%     -    0s
H    0     0                     894.0714286  858.67410  3.96%     -    0s
H    0     0                     888.7380952  858.67410  3.38%     -    0s
H    0     0                     887.9047619  858.67410  3.29%     -    0s
     0     0  861.09989    0   48  887.90476  861.09989  3.02%     -    0s
     0     0  861.09989    0   35  887.90476  861.09989  3.02%     -    0s
     0     0  865.42295    0   37  887.90476  865.42295  2.53%     -    0s
     0     0  866.16295    0   37  887.90476  866.16295  2.45%     -    0s
     0     0  868.53847    0   41  887.90476  868.53847  2.18%     -    0s
     0     0  869.53572    0   42  887.90476  869.53572  2.07%     -    0s
     0     0  871.70239    0   42  887.90476  871.70239  1.82%     -    0s
     0     0  871.70239    0   44  887.90476  871.70239  1.82%     -    0s
     0     0  871.70239    0   44  887.90476  871.70239  1.82%     -    0s
     0     0  871.70239    0   44  887.90476  871.70239  1.82%     -    0s
     0     0  871.70239    0   44  887.90476  871.70239  1.82%     -    0s
     0     0  871.70239    0   46  887.90476  871.70239  1.82%     -    0s
     0     2  871.70239    0   46  887.90476  871.70239  1.82%     -    0s

Cutting planes:
  Cover: 2
  Implied bound: 1
  Clique: 1
  MIR: 1
  Flow cover: 7

Explored 52 nodes (1017 simplex iterations) in 0.07 seconds (0.03 work units)
Thread count was 8 (of 8 available processors)

Solution count 5: 887.905 888.738 894.071 ... 1007.7

Optimal solution found (tolerance 1.00e-04)
Best objective 8.879047619048e+02, best bound 8.879047619048e+02, gap 0.0000%
 OverAll Cost = 887.9	


 time    0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15   16   17   18   19   20   21   22   23 

 gen1  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  3.5  3.3  3.2  2.8  2.8  1.5  2.0  0.0  0.0  4.6  4.8  4.8  4.8  2.2  2.2  2.2 

 gen2  4.0  4.0  4.0  4.0  4.0  4.0  5.5  5.0  7.0  6.7  6.3  5.7  5.7  0.0  0.0  2.5  3.0  9.2  9.5  9.5  9.5  4.3  4.3  4.3 

 gen3  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  1.7  1.8  1.8  1.8  0.0  0.0  0.0 

Solar  0.0  0.0  0.0  0.0  0.0  0.0  0.5  1.0  1.5  2.0  2.5  3.5  3.5  2.5  2.0  1.5  1.0  0.5  0.0  0.0  0.0  0.0  0.0  0.0 

 Load  4.0  4.0  4.0  4.0  4.0  4.0  6.0  6.0 12.0 12.0 12.0 12.0 12.0  4.0  4.0  4.0  4.0 16.0 16.0 16.0 16.0  6.5  6.5  6.5 </pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_unit_commitment_problem_matrix_api">5. Unit Commitment Problem (matrix API)</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>

<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>


<span class="c1"># 24 Hour Load Forecast (MW)
</span><span class="n">load_forecast</span> <span class="o">=</span> <span class="p">[</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">6</span><span class="p">,</span>
    <span class="mi">6</span><span class="p">,</span>
    <span class="mi">12</span><span class="p">,</span>
    <span class="mi">12</span><span class="p">,</span>
    <span class="mi">12</span><span class="p">,</span>
    <span class="mi">12</span><span class="p">,</span>
    <span class="mi">12</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">,</span>
    <span class="mi">16</span><span class="p">,</span>
    <span class="mi">16</span><span class="p">,</span>
    <span class="mi">16</span><span class="p">,</span>
    <span class="mi">16</span><span class="p">,</span>
    <span class="mf">6.5</span><span class="p">,</span>
    <span class="mf">6.5</span><span class="p">,</span>
    <span class="mf">6.5</span><span class="p">,</span>
<span class="p">]</span>

<span class="c1"># solar energy forecast (MW)
</span><span class="n">solar_forecast</span> <span class="o">=</span> <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.5</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">1.5</span><span class="p">,</span>
    <span class="mf">2.0</span><span class="p">,</span>
    <span class="mf">2.5</span><span class="p">,</span>
    <span class="mf">3.5</span><span class="p">,</span>
    <span class="mf">3.5</span><span class="p">,</span>
    <span class="mf">2.5</span><span class="p">,</span>
    <span class="mf">2.0</span><span class="p">,</span>
    <span class="mf">1.5</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">0.5</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span>
<span class="p">]</span>


<span class="c1"># global number of time intervals
</span><span class="n">nTimeIntervals</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">load_forecast</span><span class="p">)</span>

<span class="c1"># thermal units
</span><span class="n">thermal_units</span> <span class="o">=</span> <span class="p">[</span><span class="sh">"</span><span class="s">gen1</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">gen2</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">gen3</span><span class="sh">"</span><span class="p">]</span>
<span class="n">units_to_index</span> <span class="o">=</span> <span class="p">{</span><span class="n">u</span><span class="p">:</span> <span class="n">idx</span> <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">u</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">thermal_units</span><span class="p">)}</span>
<span class="n">nb_units</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">thermal_units</span><span class="p">)</span>

<span class="c1"># thermal units' costs  (a + b*p + c*p^2), (startup and shutdown costs)
</span><span class="n">thermal_units_cost</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">sup_cost</span><span class="p">,</span> <span class="n">sdn_cost</span> <span class="o">=</span> <span class="n">gp</span><span class="p">.</span><span class="nf">multidict</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="sh">"</span><span class="s">gen1</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
        <span class="sh">"</span><span class="s">gen2</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
        <span class="sh">"</span><span class="s">gen3</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="k">def</span> <span class="nf">dict_to_array</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">])</span>

<span class="n">a</span> <span class="o">=</span> <span class="nf">dict_to_array</span><span class="p">(</span><span class="n">thermal_units</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="nf">dict_to_array</span><span class="p">(</span><span class="n">thermal_units</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="nf">dict_to_array</span><span class="p">(</span><span class="n">thermal_units</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
<span class="n">sup_cost</span> <span class="o">=</span> <span class="nf">dict_to_array</span><span class="p">(</span><span class="n">thermal_units</span><span class="p">,</span> <span class="n">sup_cost</span><span class="p">)</span>
<span class="n">sdn_cost</span> <span class="o">=</span> <span class="nf">dict_to_array</span><span class="p">(</span><span class="n">thermal_units</span><span class="p">,</span> <span class="n">sdn_cost</span><span class="p">)</span>

<span class="c1"># thernal units operating limits
</span><span class="n">thermal_units_limits</span><span class="p">,</span> <span class="n">pmin</span><span class="p">,</span> <span class="n">pmax</span> <span class="o">=</span> <span class="n">gp</span><span class="p">.</span><span class="nf">multidict</span><span class="p">(</span>
    <span class="p">{</span><span class="sh">"</span><span class="s">gen1</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">],</span> <span class="sh">"</span><span class="s">gen2</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">],</span> <span class="sh">"</span><span class="s">gen3</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]}</span>
<span class="p">)</span>
<span class="n">pmin</span> <span class="o">=</span> <span class="nf">dict_to_array</span><span class="p">(</span><span class="n">thermal_units</span><span class="p">,</span> <span class="n">pmin</span><span class="p">)</span>
<span class="n">pmax</span> <span class="o">=</span> <span class="nf">dict_to_array</span><span class="p">(</span><span class="n">thermal_units</span><span class="p">,</span> <span class="n">pmax</span><span class="p">)</span>

<span class="c1"># thermal units dynamic data (initial commitment status)
</span><span class="n">thermal_units_dyn_data</span><span class="p">,</span> <span class="n">init_status</span> <span class="o">=</span> <span class="n">gp</span><span class="p">.</span><span class="nf">multidict</span><span class="p">(</span>
    <span class="p">{</span><span class="sh">"</span><span class="s">gen1</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="sh">"</span><span class="s">gen2</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="sh">"</span><span class="s">gen3</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">]}</span>
<span class="p">)</span>
<span class="n">init_status</span> <span class="o">=</span> <span class="nf">dict_to_array</span><span class="p">(</span><span class="n">thermal_units</span><span class="p">,</span> <span class="n">init_status</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">show_results</span><span class="p">():</span>
    <span class="n">obj_val_s</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="n">ObjVal</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s"> OverAll Cost = </span><span class="si">{</span><span class="nf">round</span><span class="p">(</span><span class="n">obj_val_s</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s">	</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">%5s</span><span class="sh">"</span> <span class="o">%</span> <span class="sh">"</span><span class="s">time</span><span class="sh">"</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">nTimeIntervals</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">%4s</span><span class="sh">"</span> <span class="o">%</span> <span class="n">t</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">thermal_units</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">%5s</span><span class="sh">"</span> <span class="o">%</span> <span class="n">g</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">nTimeIntervals</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">%4.1f</span><span class="sh">"</span> <span class="o">%</span> <span class="n">thermal_units_out_power</span><span class="p">[</span><span class="n">units_to_index</span><span class="p">[</span><span class="n">g</span><span class="p">],</span> <span class="n">t</span><span class="p">].</span><span class="n">X</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>

    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">%5s</span><span class="sh">"</span> <span class="o">%</span> <span class="sh">"</span><span class="s">Solar</span><span class="sh">"</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">nTimeIntervals</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">%4.1f</span><span class="sh">"</span> <span class="o">%</span> <span class="n">solar_forecast</span><span class="p">[</span><span class="n">t</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>

    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">%5s</span><span class="sh">"</span> <span class="o">%</span> <span class="sh">"</span><span class="s">Load</span><span class="sh">"</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">nTimeIntervals</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">%4.1f</span><span class="sh">"</span> <span class="o">%</span> <span class="n">load_forecast</span><span class="p">[</span><span class="n">t</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="sh">"</span><span class="s"> </span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>


<span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Env</span><span class="p">()</span> <span class="k">as</span> <span class="n">env</span><span class="p">,</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">(</span><span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>

    <span class="c1"># add variables for thermal units (power and statuses for commitment, startup and shutdown)
</span>    <span class="n">thermal_units_out_power</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addMVar</span><span class="p">(</span>
        <span class="p">(</span><span class="n">nb_units</span><span class="p">,</span> <span class="n">nTimeIntervals</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">thermal_units_out_power</span><span class="sh">"</span>
    <span class="p">)</span>
    <span class="n">thermal_units_startup_status</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addMVar</span><span class="p">(</span>
        <span class="p">(</span><span class="n">nb_units</span><span class="p">,</span> <span class="n">nTimeIntervals</span><span class="p">),</span>
        <span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">BINARY</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">thermal_unit_startup_status</span><span class="sh">"</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">thermal_units_shutdown_status</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addMVar</span><span class="p">(</span>
        <span class="p">(</span><span class="n">nb_units</span><span class="p">,</span> <span class="n">nTimeIntervals</span><span class="p">),</span>
        <span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">BINARY</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">thermal_unit_shutdown_status</span><span class="sh">"</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">thermal_units_comm_status</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addMVar</span><span class="p">(</span>
        <span class="p">(</span><span class="n">nb_units</span><span class="p">,</span> <span class="n">nTimeIntervals</span><span class="p">),</span> <span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">BINARY</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">thermal_unit_comm_status</span><span class="sh">"</span>
    <span class="p">)</span>

    <span class="c1"># define objective function as an empty quadratic construct and add terms
</span>    <span class="n">model</span><span class="p">.</span><span class="nf">setObjective</span><span class="p">((</span><span class="n">a</span><span class="p">[:,</span> <span class="bp">None</span><span class="p">]</span> <span class="o">*</span> <span class="n">thermal_units_comm_status</span><span class="p">).</span><span class="nf">sum</span><span class="p">()</span> <span class="o">+</span>
                       <span class="p">(</span><span class="n">b</span><span class="p">[:,</span> <span class="bp">None</span><span class="p">]</span> <span class="o">*</span> <span class="n">thermal_units_out_power</span><span class="p">).</span><span class="nf">sum</span><span class="p">()</span> <span class="o">+</span>
                       <span class="p">(</span><span class="n">c</span><span class="p">[:,</span> <span class="bp">None</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">thermal_units_out_power</span> <span class="o">*</span> <span class="n">thermal_units_out_power</span><span class="p">)).</span><span class="nf">sum</span><span class="p">()</span> <span class="o">+</span>
                       <span class="p">(</span><span class="n">sup_cost</span><span class="p">[:,</span> <span class="bp">None</span><span class="p">]</span> <span class="o">*</span> <span class="n">thermal_units_startup_status</span><span class="p">).</span><span class="nf">sum</span><span class="p">()</span> <span class="o">+</span>
                       <span class="p">(</span><span class="n">sdn_cost</span><span class="p">[:,</span> <span class="bp">None</span><span class="p">]</span> <span class="o">*</span> <span class="n">thermal_units_shutdown_status</span><span class="p">).</span><span class="nf">sum</span><span class="p">())</span>

    <span class="c1"># Power balance equations
</span>    <span class="n">required_power</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="n">l</span> <span class="o">-</span> <span class="n">s</span> <span class="k">for</span> <span class="n">l</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="nf">zip</span><span class="p">(</span><span class="n">load_forecast</span><span class="p">,</span> <span class="n">solar_forecast</span><span class="p">)</span> <span class="p">])</span>
    <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span>
        <span class="n">thermal_units_out_power</span><span class="p">.</span><span class="nf">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="n">required_power</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">power_balance</span><span class="sh">"</span>
    <span class="p">)</span>

    <span class="c1"># Thermal units logical constraints
</span>
    <span class="c1"># Initial condition (t = 0)
</span>    <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span>
        <span class="n">thermal_units_comm_status</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">init_status</span> <span class="o">==</span>
        <span class="n">thermal_units_startup_status</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">thermal_units_shutdown_status</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span>
        <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">logical1_initial</span><span class="sh">"</span>
    <span class="p">)</span>

    <span class="c1"># Remaining time intervals (t &gt; 0)
</span>    <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span>
        <span class="n">thermal_units_comm_status</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span> <span class="o">-</span> <span class="n">thermal_units_comm_status</span><span class="p">[:,</span> <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="o">==</span> <span class="n">thermal_units_startup_status</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span> <span class="o">-</span> <span class="n">thermal_units_shutdown_status</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:],</span>
        <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">logical1_remaining</span><span class="sh">"</span>
    <span class="p">)</span>

    <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span>
        <span class="n">thermal_units_startup_status</span> <span class="o">+</span> <span class="n">thermal_units_shutdown_status</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">logical2</span><span class="sh">"</span>
    <span class="p">)</span>

    <span class="c1"># Thermal units physical constraints, using indicator constraints
</span>    <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">thermal_units</span><span class="p">)):</span>
        <span class="n">model</span><span class="p">.</span><span class="nf">addGenConstrIndicator</span><span class="p">(</span><span class="n">thermal_units_comm_status</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="p">:],</span> <span class="bp">True</span><span class="p">,</span>
                                    <span class="n">thermal_units_out_power</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="p">:]</span> <span class="o">&gt;=</span> <span class="n">pmin</span><span class="p">[</span><span class="n">g</span><span class="p">],</span>
                                    <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">physical_min</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">model</span><span class="p">.</span><span class="nf">addGenConstrIndicator</span><span class="p">(</span><span class="n">thermal_units_comm_status</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="p">:],</span> <span class="bp">True</span><span class="p">,</span>
                                    <span class="n">thermal_units_out_power</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="p">:]</span> <span class="o">&lt;=</span> <span class="n">pmax</span><span class="p">[</span><span class="n">g</span><span class="p">],</span>
                                    <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">physical_max</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">model</span><span class="p">.</span><span class="nf">addGenConstrIndicator</span><span class="p">(</span><span class="n">thermal_units_comm_status</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="p">:],</span> <span class="bp">False</span><span class="p">,</span>
                                    <span class="n">thermal_units_out_power</span><span class="p">[</span><span class="n">g</span><span class="p">,</span> <span class="p">:]</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">,</span>
                                    <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">physical_off</span><span class="sh">"</span><span class="p">)</span>

    <span class="n">model</span><span class="p">.</span><span class="nf">optimize</span><span class="p">()</span>
    <span class="nf">show_results</span><span class="p">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the log of the execution of this program:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Gurobi Optimizer version 12.0.0 build v12.0.0rc1 (mac64[arm] - Darwin 24.2.0 24C101)

CPU model: Apple M1 Pro
Thread count: 8 physical cores, 8 logical processors, using up to 8 threads

Optimize a model with 168 rows, 288 columns and 501 nonzeros
Model fingerprint: 0x3b9885a9
Model has 72 quadratic objective terms
Model has 216 simple general constraints
  216 INDICATOR
Variable types: 72 continuous, 216 integer (216 binary)
Coefficient statistics:
  Matrix range     [1e+00, 1e+00]
  Objective range  [5e-01, 5e+00]
  QObjective range [1e+00, 4e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e+00, 2e+01]
  GenCon rhs range [1e+00, 1e+01]
  GenCon coe range [1e+00, 1e+00]
Presolve added 1 rows and 0 columns
Presolve removed 0 rows and 125 columns
Presolve time: 0.01s
Presolved: 183 rows, 170 columns, 468 nonzeros
Presolved model has 43 quadratic objective terms
Variable types: 50 continuous, 120 integer (120 binary)
Found heuristic solution: objective 972.4464286
Found heuristic solution: objective 949.4464286

Root relaxation: objective 8.562274e+02, 297 iterations, 0.00 seconds (0.00 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0  856.22741    0   47  949.44643  856.22741  9.82%     -    0s
H    0     0                     888.6964286  856.22741  3.65%     -    0s
H    0     0                     887.9047619  856.22741  3.57%     -    0s
     0     0  859.55567    0   49  887.90476  859.55567  3.19%     -    0s
     0     0  859.55567    0   40  887.90476  859.55567  3.19%     -    0s
     0     0  860.62679    0   43  887.90476  860.62679  3.07%     -    0s
     0     0  861.04305    0   43  887.90476  861.04305  3.03%     -    0s
     0     0  863.11702    0   40  887.90476  863.11702  2.79%     -    0s
     0     0  863.60301    0   40  887.90476  863.60301  2.74%     -    0s
     0     0  864.38939    0   42  887.90476  864.38939  2.65%     -    0s
     0     0  865.38905    0   42  887.90476  865.38905  2.54%     -    0s
     0     0  865.80613    0   42  887.90476  865.80613  2.49%     -    0s
     0     0  865.80613    0   42  887.90476  865.80613  2.49%     -    0s
     0     0  865.81082    0   42  887.90476  865.81082  2.49%     -    0s
     0     2  865.81082    0   42  887.90476  865.81082  2.49%     -    0s

Cutting planes:
  Learned: 1
  Cover: 2
  MIR: 1
  Flow cover: 2

Explored 147 nodes (1455 simplex iterations) in 0.07 seconds (0.03 work units)
Thread count was 8 (of 8 available processors)

Solution count 4: 887.905 888.696 949.446 972.446 

Optimal solution found (tolerance 1.00e-04)
Best objective 8.879047619048e+02, best bound 8.879047606600e+02, gap 0.0000%
 OverAll Cost = 887.9	


 time    0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15   16   17   18   19   20   21   22   23 

 gen1  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  3.5  3.3  3.2  2.8  2.8  1.5  2.0  0.0  0.0  4.6  4.8  4.8  4.8  2.2  2.2  2.2 

 gen2  4.0  4.0  4.0  4.0  4.0  4.0  5.5  5.0  7.0  6.7  6.3  5.7  5.7  0.0  0.0  2.5  3.0  9.2  9.5  9.5  9.5  4.3  4.3  4.3 

 gen3  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  1.7  1.8  1.8  1.8  0.0  0.0  0.0 

Solar  0.0  0.0  0.0  0.0  0.0  0.0  0.5  1.0  1.5  2.0  2.5  3.5  3.5  2.5  2.0  1.5  1.0  0.5  0.0  0.0  0.0  0.0  0.0  0.0 

 Load  4.0  4.0  4.0  4.0  4.0  4.0  6.0  6.0 12.0 12.0 12.0 12.0 12.0  4.0  4.0  4.0  4.0 16.0 16.0 16.0 16.0  6.5  6.5  6.5 </pre>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-01-21 21:08:41 +0100
</div>
</div>
</body>
</html>