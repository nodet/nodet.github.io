<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="author" content="Xavier Nodet">
<title>gurobipy: Course</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge, pre.rouge .w {
  color: #444444;
}
pre.rouge .cp {
  color: #CC00A3;
}
pre.rouge .cs {
  color: #CC00A3;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cm, pre.rouge .cpf, pre.rouge .c1 {
  color: #FF0000;
}
pre.rouge .kc {
  color: #C34E00;
}
pre.rouge .kd {
  color: #0000FF;
}
pre.rouge .kr {
  color: #007575;
}
pre.rouge .k, pre.rouge .kn, pre.rouge .kp, pre.rouge .kt, pre.rouge .kv {
  color: #0000FF;
}
pre.rouge .s, pre.rouge .sb, pre.rouge .sc, pre.rouge .dl, pre.rouge .sd, pre.rouge .s2, pre.rouge .se, pre.rouge .sh, pre.rouge .si, pre.rouge .sx, pre.rouge .sr, pre.rouge .s1, pre.rouge .ss {
  color: #009C00;
}
pre.rouge .sa {
  color: #0000FF;
}
pre.rouge .nb, pre.rouge .bp {
  color: #C34E00;
}
</style>
</head>
<body class="article">
<div id="header">
<h1><code>gurobipy</code>: Course</h1>
<div class="details">
<span id="author" class="author">Xavier Nodet</span><br>
<span id="email" class="email"><a href="mailto:xavier.nodet@gurobi.com">xavier.nodet@gurobi.com</a></span><br>
<span id="revdate">January 2025  - a6b679c</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Content</div>
<ul class="sectlevel1">
<li><a href="#_optimization_models">1. Optimization Models</a></li>
<li><a href="#_introductory_examples">2. Introductory examples</a>
<ul class="sectlevel2">
<li><a href="#simple-example">2.1. Simple example</a></li>
<li><a href="#_same_example_using_the_matrix_api">2.2. Same example, using the matrix API</a></li>
</ul>
</li>
<li><a href="#_python_data_structures">3. Python Data Structures</a></li>
<li><a href="#_extended_data_structures_in_gurobipy">4. Extended Data Structures in gurobipy</a>
<ul class="sectlevel2">
<li><a href="#tuplelist">4.1. tuplelist</a></li>
<li><a href="#tupledict">4.2. tupledict</a></li>
<li><a href="#_multidict">4.3. multidict()</a></li>
<li><a href="#_example_of_extended_structures">4.4. Example of extended structures</a></li>
</ul>
</li>
<li><a href="#_environments">5. Environments</a></li>
<li><a href="#_models">6. Models</a>
<ul class="sectlevel2">
<li><a href="#_decision_variables_model_addvar">6.1. Decision Variables, Model.addVar()</a></li>
<li><a href="#_model_addvars">6.2. Model.addVars()</a></li>
<li><a href="#_constraints_model_addconstr">6.3. Constraints, Model.addConstr()</a></li>
<li><a href="#_model_addconstrs">6.4. Model.addConstrs()</a></li>
<li><a href="#_objective_function">6.5. Objective Function</a></li>
<li><a href="#_optimizing_for_multiple_objectives">6.6. Optimizing for Multiple Objectives</a></li>
<li><a href="#_sos_constraints">6.7. SOS Constraints</a></li>
<li><a href="#_general_constraints">6.8. General Constraints</a></li>
</ul>
</li>
<li><a href="#_matrix_based_api">7. Matrix-based API</a></li>
<li><a href="#_interacting_with_the_model">8. Interacting with the Model</a>
<ul class="sectlevel2">
<li><a href="#_attributes">8.1. Attributes</a></li>
<li><a href="#_parameters">8.2. Parameters</a></li>
<li><a href="#_callbacks">8.3. Callbacks</a></li>
</ul>
</li>
<li><a href="#_requirements_and_installation">9. Requirements and installation</a>
<ul class="sectlevel2">
<li><a href="#_setup_for_windows">9.1. Setup for Windows</a></li>
<li><a href="#_setup_for_macos">9.2. Setup for macOS</a></li>
<li><a href="#install-gurobipy">9.3. Installation of Gurobipy</a></li>
<li><a href="#verify-installation">9.4. Verification of the installation</a></li>
<li><a href="#_get_a_free_gurobi_license">9.5. Get a free Gurobi license</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This course is an introduction to <code>gurobipy</code>, the Gurobi Python API.</p>
</div>
<div class="paragraph">
<p>It is heavily inspired by material prepared by several colleagues,
including Dr Maliheh Aramon.  It uses Gurobi 12, the latest version as
of January 2025.  The most up-to-date version of this course, as well as
the slides shown during the lecture are available on
<a href="https://nodet.github.io" class="bare">https://nodet.github.io</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_optimization_models">1. Optimization Models</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Gurobi can be used from multiple programming languages and tools (C,
C++, Java, .NET, Python, MATLAB, R).  Computations can be executed
locally, on a remote Compute Server, or on Gurobi Cloud by changing only
the license file.</p>
</div>
<div class="paragraph">
<p>Gurobi can solve models with linear and quadratic (incl. nonconvex)
constraints and objective.</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{align}
\text{minimize} \quad   &amp; x^T Q x + c^T x + d          &amp;                 \notag \\
\text{subject to} \quad &amp; Ax = b                       &amp;                 \notag \\
                        &amp; x^T Q_i x + c_i^T x \leq d_i &amp; \forall i \in I \notag \\
                        &amp; l \leq x \leq u              &amp;                 \notag \\
                        &amp; x_j \in \mathbb{Z}           &amp; \forall j \in J \notag
\end{align}\]
</div>
</div>
<div class="paragraph">
<p>It can also solve models including constraints using functions
such as <em>sin</em>, <em>log</em> or <em>pow</em>, but we will seldom discuss this is this course.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introductory_examples">2. Introductory examples</h2>
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="simple-example">2.1. Simple example</h3>
<div class="paragraph">
<p>Let us start with a simple example</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{align}
\text{maximize}   \quad &amp; x + y + 2z           \notag \\
\text{subject to} \quad &amp; x + 2y + 3z \leq 4   \notag \\
                        &amp; x + y \geq 1         \notag \\
                        &amp; x, y, z \in \{0, 1\} \notag
\end{align}\]
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>Here is the Python code to solve this problem:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>                                                  <b class="conum">(1)</b>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>                                               <b class="conum">(2)</b>

<span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Env</span><span class="p">()</span> <span class="k">as</span> <span class="n">env</span><span class="p">,</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">(</span><span class="sh">"</span><span class="s">simple-example</span><span class="sh">"</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>    <b class="conum">(3)</b>
    <span class="n">x</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVar</span><span class="p">(</span><span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">BINARY</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">x</span><span class="sh">"</span><span class="p">)</span>                       <b class="conum">(4)</b>
    <span class="n">y</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVar</span><span class="p">(</span><span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">BINARY</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">y</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVar</span><span class="p">(</span><span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">BINARY</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">z</span><span class="sh">"</span><span class="p">)</span>

    <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">y</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">z</span> <span class="o">&lt;=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">c0</span><span class="sh">"</span><span class="p">)</span>                 <b class="conum">(5)</b>
    <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">c1</span><span class="sh">"</span><span class="p">)</span>

    <span class="n">model</span><span class="p">.</span><span class="nf">setObjective</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">z</span><span class="p">,</span> <span class="n">sense</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">MAXIMIZE</span><span class="p">)</span>              <b class="conum">(6)</b>

    <span class="n">model</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">example.lp</span><span class="sh">"</span><span class="p">)</span>                                          <b class="conum">(7)</b>
    <span class="n">model</span><span class="p">.</span><span class="nf">optimize</span><span class="p">()</span>                                                   <b class="conum">(8)</b>

    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">******* Solution *******</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">model</span><span class="p">.</span><span class="nf">getVars</span><span class="p">():</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">var</span><span class="p">.</span><span class="n">VarName</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">var</span><span class="p">.</span><span class="n">X</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>                               <b class="conum">(9)</b>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">************************</span><span class="sh">"</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Import gurobipy package as gp for convenience</p>
</li>
<li>
<p>GRB is the list of all Gurobi constants</p>
</li>
<li>
<p>Create a Gurobi environment and a model object</p>
</li>
<li>
<p>Define decision variables</p>
</li>
<li>
<p>Define constraints</p>
</li>
<li>
<p>Define objective</p>
</li>
<li>
<p>Save the model as an LP file</p>
</li>
<li>
<p>Optimize model</p>
</li>
<li>
<p>X attribute is the variable&#8217;s value in the solution</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>Here is the log of the execution of this program:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Gurobi Optimizer version 12.0.3 build v12.0.3rc0 (mac64[arm] - Darwin 24.6.0 24G231)

CPU model: Apple M4 Pro
Thread count: 12 physical cores, 12 logical processors, using up to 12 threads

Optimize a model with 2 rows, 3 columns and 5 nonzeros
Model fingerprint: 0x98886187
Variable types: 0 continuous, 3 integer (3 binary)
Coefficient statistics:
  Matrix range     [1e+00, 3e+00]
  Objective range  [1e+00, 2e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e+00, 4e+00]
Found heuristic solution: objective 2.0000000
Presolve removed 2 rows and 3 columns
Presolve time: 0.00s
Presolve: All rows and columns removed

Explored 0 nodes (0 simplex iterations) in 0.00 seconds (0.00 work units)
Thread count was 1 (of 12 available processors)

Solution count 2: 3 2 

Optimal solution found (tolerance 1.00e-04)
Best objective 3.000000000000e+00, best bound 3.000000000000e+00, gap 0.0000%
******* Solution *******
x: 1.0
y: 0.0
z: 1.0
************************</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>And here&#8217;s the generated LP file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>\ Model simple-example
\ LP format - for model browsing. Use MPS format to capture full model detail.
Maximize
  x + y + 2 z
Subject To
 c0: x + 2 y + 3 z &lt;= 4
 c1: x + y &gt;= 1
Bounds
Binaries
 x y z
End</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_same_example_using_the_matrix_api">2.2. Same example, using the matrix API</h3>
<div id="matrix-api-example" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>
<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">scipy.sparse</span> <span class="k">as</span> <span class="n">sp</span>

<span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Env</span><span class="p">()</span> <span class="k">as</span> <span class="n">env</span><span class="p">,</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">(</span><span class="sh">"</span><span class="s">matrix1</span><span class="sh">"</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">)</span> <span class="k">as</span> <span class="n">m</span><span class="p">:</span>

    <span class="c1"># Create variables
</span>    <span class="n">x</span> <span class="o">=</span> <span class="n">m</span><span class="p">.</span><span class="nf">addMVar</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">BINARY</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">x</span><span class="sh">"</span><span class="p">)</span>

    <span class="c1"># Set objective
</span>    <span class="n">obj</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">])</span>
    <span class="n">m</span><span class="p">.</span><span class="nf">setObjective</span><span class="p">(</span><span class="n">obj</span> <span class="o">@</span> <span class="n">x</span><span class="p">,</span> <span class="n">GRB</span><span class="p">.</span><span class="n">MAXIMIZE</span><span class="p">)</span>

    <span class="c1"># Build (sparse) constraint matrix
</span>    <span class="n">row</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
    <span class="n">col</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
    <span class="n">val</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">])</span>
    <span class="c1"># A is such that A[row[k], col[k]] = val[k]
</span>    <span class="n">A</span> <span class="o">=</span> <span class="n">sp</span><span class="p">.</span><span class="nf">csr_matrix</span><span class="p">((</span><span class="n">val</span><span class="p">,</span> <span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)),</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

    <span class="c1"># Build rhs vector
</span>    <span class="n">rhs</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mf">4.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">])</span>

    <span class="c1"># Add constraints
</span>    <span class="n">m</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span><span class="n">A</span> <span class="o">@</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">rhs</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">c</span><span class="sh">"</span><span class="p">)</span>

    <span class="c1"># Write the model
</span>    <span class="n">m</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">matrix1.lp</span><span class="sh">"</span><span class="p">)</span>

    <span class="c1"># Optimize model
</span>    <span class="n">m</span><span class="p">.</span><span class="nf">optimize</span><span class="p">()</span>

    <span class="nf">print</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">X</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Obj: </span><span class="si">{</span><span class="n">m</span><span class="p">.</span><span class="n">ObjVal</span><span class="si">:</span><span class="n">g</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>Here&#8217;s the log of the execution:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Gurobi Optimizer version 12.0.3 build v12.0.3rc0 (mac64[arm] - Darwin 24.6.0 24G231)

CPU model: Apple M4 Pro
Thread count: 12 physical cores, 12 logical processors, using up to 12 threads

Optimize a model with 2 rows, 3 columns and 5 nonzeros
Model fingerprint: 0x8d4960d3
Variable types: 0 continuous, 3 integer (3 binary)
Coefficient statistics:
  Matrix range     [1e+00, 3e+00]
  Objective range  [1e+00, 2e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e+00, 4e+00]
Found heuristic solution: objective 2.0000000
Presolve removed 2 rows and 3 columns
Presolve time: 0.00s
Presolve: All rows and columns removed

Explored 0 nodes (0 simplex iterations) in 0.00 seconds (0.00 work units)
Thread count was 1 (of 12 available processors)

Solution count 2: 3 2 

Optimal solution found (tolerance 1.00e-04)
Best objective 3.000000000000e+00, best bound 3.000000000000e+00, gap 0.0000%
[1. 0. 1.]
Obj: 3</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>And here&#8217;s the generated LP file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>\ Model matrix1
\ LP format - for model browsing. Use MPS format to capture full model detail.
Maximize
  x[0] + x[1] + 2 x[2]
Subject To
 c[0]: x[0] + 2 x[1] + 3 x[2] &lt;= 4
 c[1]: - x[0] - x[1] &lt;= -1
Bounds
Binaries
 x[0] x[1] x[2]
End</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_python_data_structures">3. Python Data Structures</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><code>tuple</code>: An ordered, compound grouping that cannot be modified once it
is created and is ideal for representing multi dimensional subscripts.</p>
<div class="literalblock">
<div class="content">
<pre>("city_0", "city_1")</pre>
</div>
</div>
</li>
<li>
<p><code>list</code>: An ordered group, so each item is indexed. Lists can be
modified by adding, deleting or sorting elements.</p>
<div class="literalblock">
<div class="content">
<pre>["city_0", "city_1", "city_2"]</pre>
</div>
</div>
</li>
<li>
<p><code>set</code>: An unordered group of unique elements. Sets can only be
modified by adding or deleting.</p>
<div class="literalblock">
<div class="content">
<pre>{"city_0", "city_1", "city_2"}</pre>
</div>
</div>
</li>
<li>
<p><code>dict</code>: A key-value pair mapping that is ideal for representing
indexed data such as cost, demand, capacity.</p>
<div class="literalblock">
<div class="content">
<pre>demand = {"city_0": 100, "city_1": 50, "city_2": 40}</pre>
</div>
</div>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_extended_data_structures_in_gurobipy">4. Extended Data Structures in gurobipy</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="tuplelist">4.1. tuplelist</h3>
<div class="paragraph">
<p><a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/tuplelist.html"><code>tuplelist</code></a>: a sub-class of
Python list, used to build sub-lists efficiently. See in particular
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/tuplelist.html#tuplelist.select"><code>tuplelist.select(pattern)</code></a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">gp</span><span class="p">.</span><span class="nf">tuplelist</span><span class="p">([(</span><span class="sh">'</span><span class="s">A</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">B</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">C</span><span class="sh">'</span><span class="p">),</span>
                  <span class="p">(</span><span class="sh">'</span><span class="s">A</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">C</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">D</span><span class="sh">'</span><span class="p">),</span>
                  <span class="p">(</span><span class="sh">'</span><span class="s">A</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">E</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">C</span><span class="sh">'</span><span class="p">)])</span>
<span class="nf">print</span><span class="p">(</span><span class="n">l</span><span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="sh">'</span><span class="s">A</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">*</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">C</span><span class="sh">'</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;gurobi.tuplelist (2 tuples, 3 values each):
 ( A , B , C )
 ( A , E , C )
&gt;</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="tupledict">4.2. tupledict</h3>
<div class="paragraph">
<p><a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/tupledict.html"><code>tupledict</code></a>: a sub-class of
Python dict, where the values are usually
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/var.html#Var">Gurobi variables</a>, to
efficiently retrieve those whose key match a specified tuple pattern.</p>
</div>
<div class="paragraph">
<p>Some important methods to build linear expressions efficiently:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/tupledict.html#tupledict.select">tupledict.select(pattern)</a>
\(\rightarrow\) <code>list</code></p>
</li>
<li>
<p><a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/tupledict.html#tupledict.sum">tupledict.sum(pattern)</a>
&#8594; <a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/linexpr.html"><code>gp.LinExpr</code></a></p>
</li>
<li>
<p><a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/tupledict.html#tupledict.prod">tupledict.prod(coeff,
pattern)</a> &#8594; <code>gp.LinExpr</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">()</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">m</span><span class="p">.</span><span class="nf">addVars</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)],</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">x</span><span class="sh">"</span><span class="p">)</span>     <span class="c1"># x is a tupledict
</span><span class="n">m</span><span class="p">.</span><span class="nf">update</span><span class="p">()</span>                                         <span class="c1"># Process all model updates
</span><span class="n">expr</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">sum</span><span class="p">(</span><span class="sh">'</span><span class="s">*</span><span class="sh">'</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>x[1,3] + x[2,3]</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_multidict">4.3. multidict()</h3>
<div class="paragraph">
<p><a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/func_global.html#multidict">multidict()</a>
is a convenience function to split a dict of lists.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="n">keys</span><span class="p">,</span> <span class="n">dict1</span><span class="p">,</span> <span class="n">dict2</span> <span class="o">=</span> <span class="n">gp</span><span class="p">.</span><span class="nf">multidict</span><span class="p">(</span> <span class="p">{</span>
  <span class="sh">'</span><span class="s">key1</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
  <span class="sh">'</span><span class="s">key2</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
  <span class="sh">'</span><span class="s">key3</span><span class="sh">'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="p">}</span> <span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">dict1</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">dict2</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>['key1', 'key2', 'key3']
{'key1': 1, 'key2': 1, 'key3': 1}
{'key1': 2, 'key2': 3, 'key3': 4}</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_example_of_extended_structures">4.4. Example of extended structures</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">gp</span><span class="p">.</span><span class="nf">tupledict</span><span class="p">([</span>
        <span class="p">((</span><span class="sh">"</span><span class="s">a</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">b</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">c</span><span class="sh">"</span><span class="p">),</span> <span class="mi">3</span><span class="p">),</span>
        <span class="p">((</span><span class="sh">"</span><span class="s">a</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">c</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">b</span><span class="sh">"</span><span class="p">),</span> <span class="mi">4</span><span class="p">),</span>
        <span class="p">((</span><span class="sh">"</span><span class="s">b</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">a</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">c</span><span class="sh">"</span><span class="p">),</span> <span class="mi">5</span><span class="p">),</span>
        <span class="p">((</span><span class="sh">"</span><span class="s">b</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">c</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">a</span><span class="sh">"</span><span class="p">),</span> <span class="mi">6</span><span class="p">),</span>
        <span class="p">((</span><span class="sh">"</span><span class="s">c</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">a</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">b</span><span class="sh">"</span><span class="p">),</span> <span class="mi">7</span><span class="p">),</span>
        <span class="p">((</span><span class="sh">"</span><span class="s">c</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">b</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">a</span><span class="sh">"</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
    <span class="p">])</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">data: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">Tuplelist:</span><span class="sh">"</span><span class="p">)</span>
<span class="n">keys</span> <span class="o">=</span> <span class="n">gp</span><span class="p">.</span><span class="nf">tuplelist</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="nf">keys</span><span class="p">())</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\t</span><span class="s">select: </span><span class="si">{</span><span class="n">keys</span><span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="sh">'</span><span class="s">a</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">*</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">*</span><span class="sh">'</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">Tupledict:</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\t</span><span class="s">select  : </span><span class="si">{</span><span class="n">data</span><span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="sh">'</span><span class="s">a</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">*</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">*</span><span class="sh">'</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\t</span><span class="s">sum     : </span><span class="si">{</span><span class="n">data</span><span class="p">.</span><span class="nf">sum</span><span class="p">(</span><span class="sh">'</span><span class="s">*</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">*</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">*</span><span class="sh">'</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="n">coeff</span> <span class="o">=</span> <span class="p">{(</span><span class="sh">"</span><span class="s">a</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">c</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">b</span><span class="sh">"</span><span class="p">):</span> <span class="mi">6</span><span class="p">,</span> <span class="p">(</span><span class="sh">"</span><span class="s">b</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">c</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">a</span><span class="sh">"</span><span class="p">):</span> <span class="o">-</span><span class="mi">4</span><span class="p">}</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\t</span><span class="s">prod    : </span><span class="si">{</span><span class="n">data</span><span class="p">.</span><span class="nf">prod</span><span class="p">(</span><span class="n">coeff</span><span class="p">,</span> <span class="sh">'</span><span class="s">*</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">c</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">*</span><span class="sh">'</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="n">arcs</span><span class="p">,</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">cost</span> <span class="o">=</span> <span class="n">gp</span><span class="p">.</span><span class="nf">multidict</span><span class="p">({</span>
        <span class="p">(</span><span class="sh">"</span><span class="s">Detroit </span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Boston </span><span class="sh">"</span><span class="p">):</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
        <span class="p">(</span><span class="sh">"</span><span class="s">Detroit </span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">New York </span><span class="sh">"</span><span class="p">):</span> <span class="p">[</span><span class="mi">80</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
        <span class="p">(</span><span class="sh">"</span><span class="s">Detroit </span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Seattle </span><span class="sh">"</span><span class="p">):</span> <span class="p">[</span><span class="mi">120</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
        <span class="p">(</span><span class="sh">"</span><span class="s">Denver </span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Boston </span><span class="sh">"</span><span class="p">):</span> <span class="p">[</span><span class="mi">120</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
        <span class="p">(</span><span class="sh">"</span><span class="s">Denver </span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">New York </span><span class="sh">"</span><span class="p">):</span> <span class="p">[</span><span class="mi">120</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span>
        <span class="p">(</span><span class="sh">"</span><span class="s">Denver </span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Seattle </span><span class="sh">"</span><span class="p">):</span> <span class="p">[</span><span class="mi">120</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
    <span class="p">})</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">Multidict:</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\t</span><span class="s">cost: </span><span class="si">{</span><span class="n">cost</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\t</span><span class="s">capacity: </span><span class="si">{</span><span class="n">capacity</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>data: {('a', 'b', 'c'): 3, ('a', 'c', 'b'): 4, ('b', 'a', 'c'): 5, ('b', 'c', 'a'): 6, ('c', 'a', 'b'): 7, ('c', 'b', 'a'): 3}

Tuplelist:
	select: &lt;gurobi.tuplelist (2 tuples, 3 values each):
 ( a , b , c )
 ( a , c , b )
&gt;

Tupledict:
	select  : [3, 4]
	sum     : 28.0
	prod    : 0.0

Multidict:
	cost: {('Detroit ', 'Boston '): 7, ('Detroit ', 'New York '): 5, ('Detroit ', 'Seattle '): 4, ('Denver ', 'Boston '): 8, ('Denver ', 'New York '): 11, ('Denver ', 'Seattle '): 4}


	capacity: {('Detroit ', 'Boston '): 100, ('Detroit ', 'New York '): 80, ('Detroit ', 'Seattle '): 120, ('Denver ', 'Boston '): 120, ('Denver ', 'New York '): 120, ('Denver ', 'Seattle '): 120}</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_environments">5. Environments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Environments hold data that is global to one or more models.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>They hold a Gurobi license.
The license is required as soon as the
environment is started, and until it is disposed of.  The license may be
either completely
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/concepts/environments/configuration.html#">specified through
parameters</a>, or found in a <code>gurobi.lic</code> file in one of the locations
that Gurobi looks into (home directory or default installation
location), or found in a
<a href="https://support.gurobi.com/hc/en-us/articles/360013417211-Where-do-I-place-the-Gurobi-license-file-gurobi-lic">non-default
location</a> through the <code>GRB_LICENSE_FILE</code> environment variable.</p>
</li>
<li>
<p>They capture sets of parameter settings.
This is used to control the
behaviour of the solver. For example, the
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/parameters.html#parametertimelimit">TimeLimit</a>
parameter indicates the maximum allowed runtime for any solve, while the
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/parameters.html#parametermethod">Method</a> parameter
chooses the algorithm used to solve continuous optimization models.</p>
</li>
<li>
<p>They delineate a (single-threaded)
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/concepts/environments/session.html">Gurobi session</a>.
When using remote machines for the computations, you
may not want to let go of the session after each model if solving a
sequence of them. Creating a Gurobi environment incurs overhead, ranging
anywhere from a quick local license check all the way to spinning up a
machine on the cloud.  By reusing a single environment, you avoid paying
this overhead multiple times.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>The basic usage pattern is the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>

<span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Env</span><span class="p">()</span> <span class="k">as</span> <span class="n">env</span><span class="p">,</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">(</span><span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">)</span> <span class="k">as</span> <span class="n">m</span><span class="p">:</span>
    <span class="c1"># Use the model
</span>    <span class="bp">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This creates an Environment using the license found in one of the
default location, and a model on top if this environment. Both are disposed
when leaving the scope.</p>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>A more advanced usage pattern is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>

<span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Env</span><span class="p">(</span><span class="n">empty</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">env</span><span class="p">:</span>
    <span class="c1"># Set licensing parameters
</span>    <span class="n">env</span><span class="p">.</span><span class="nf">setParam</span><span class="p">(</span><span class="sh">"</span><span class="s">CloudAccessID</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">...</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">env</span><span class="p">.</span><span class="nf">setParam</span><span class="p">(</span><span class="sh">"</span><span class="s">CloudSecretKey</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">...</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">env</span><span class="p">.</span><span class="nf">setParam</span><span class="p">(</span><span class="sh">"</span><span class="s">LicenseID</span><span class="sh">"</span><span class="p">,</span> <span class="p">...)</span>
    <span class="c1"># Start the environment before creating a model
</span>    <span class="n">env</span><span class="p">.</span><span class="nf">start</span><span class="p">()</span>

    <span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">(</span><span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">)</span> <span class="k">as</span> <span class="n">m</span><span class="p">:</span>
        <span class="c1"># Use the model
</span>        <span class="bp">...</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_models">6. Models</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/model.html">Model</a> instance holds variables
and constraints that define the model to solve, as well as parameters
that define the behaviour of the solver.</p>
</div>
<div style="page-break-after: always;"></div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Env</span><span class="p">()</span> <span class="k">as</span> <span class="n">env</span><span class="p">,</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">(</span><span class="sh">"</span><span class="s">simple-example</span><span class="sh">"</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVar</span><span class="p">(</span><span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">BINARY</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">x</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVar</span><span class="p">(</span><span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">BINARY</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">y</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">c1</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">c1</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">model</span><span class="p">.</span><span class="nf">setObjective</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">z</span><span class="p">,</span> <span class="n">sense</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">MAXIMIZE</span><span class="p">)</span>

    <span class="n">model</span><span class="p">.</span><span class="n">params</span><span class="p">.</span><span class="n">MipFocus</span><span class="o">=</span><span class="mi">1</span>                                         <b class="conum">(1)</b>
    <span class="n">model</span><span class="p">.</span><span class="n">params</span><span class="p">.</span><span class="n">TimeLimit</span> <span class="o">=</span> <span class="mi">3600</span>                                   <b class="conum">(2)</b>

    <span class="n">model</span><span class="p">.</span><span class="nf">optimize</span><span class="p">()</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Focus on finding the best possible solutions</p>
</li>
<li>
<p>Stop after one hour</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>It has methods to create and edit variables and constraints, to set
parameters, to solve the model, to retrieve information, and more.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python">    <span class="c1"># ...
</span>    <span class="n">model</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">model.mps</span><span class="sh">"</span><span class="p">)</span>                             <b class="conum">(1)</b>
    <span class="n">model</span><span class="p">.</span><span class="nf">chgCoeff</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>                             <b class="conum">(2)</b>
    <span class="n">model</span><span class="p">.</span><span class="nf">computeIIS</span><span class="p">()</span>                                   <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Store the model in an MPS file</p>
</li>
<li>
<p>Change the coefficient of variable <code>x</code> in constraint <code>c1</code> to 2</p>
</li>
<li>
<p>Compute an <a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/model.html#Model.computeIIS">Irreducible Inconsistent Set</a></p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_decision_variables_model_addvar">6.1. Decision Variables, Model.addVar()</h3>
<div class="paragraph">
<p>A decision variable is necessarily associated to exactly one instance of
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/model.html">Model</a>, and gets created using
methods such as
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/model.html#Model.addVar">Model.addVar()</a> to
create a single variable,
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/model.html#Model.addVars">Model.addVars()</a> to
create multiple variables at once and
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/model.html#Model.addMVar">Model.addMVars()</a> to
create a matrix of variables.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">Model</span><span class="p">.</span><span class="nf">addVar</span><span class="p">(</span><span class="n">lb</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="nf">float</span><span class="p">(</span><span class="sh">'</span><span class="s">inf</span><span class="sh">'</span><span class="p">),</span>
             <span class="n">obj</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
             <span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">CONTINUOUS</span><span class="p">,</span>
             <span class="n">name</span><span class="o">=</span><span class="sh">""</span><span class="p">)</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>The available variable types in Gurobi are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Continuous: GRB.CONTINUOUS</p>
</li>
<li>
<p>General integer: GRB.INTEGER</p>
</li>
<li>
<p>Binary: GRB.BINARY</p>
</li>
<li>
<p>Semi-continuous: GRB.SEMICONT</p>
</li>
<li>
<p>Semi-integer: GRB.SEMIINT</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A semi-continuous variable has the property that it takes a value of 0,
or a value between the specified lower and upper bounds. A semi-integer
variable adds the additional restriction that the variable should take
an integral value.</p>
</div>
<div style="page-break-after: always;"></div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="c1"># Define a binary decision variable with (default) lb=0
</span><span class="n">x</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVar</span><span class="p">(</span><span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">BINARY</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">x</span><span class="sh">"</span><span class="p">)</span>
<span class="c1"># Define an integer variable with lb=-1, ub=100
</span><span class="n">y</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVar</span><span class="p">(</span><span class="n">lb</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">INTEGER</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">y</span><span class="sh">"</span><span class="p">)</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_model_addvars">6.2. Model.addVars()</h3>
<div class="paragraph">
<p>To add multiple decision variables to the model, use the
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/model.html#Model.addVars">Model.addVars()</a>
method which returns a Gurobi <a href="#tupledict">tupledict</a> object containing the newly
created variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">Model</span><span class="p">.</span><span class="nf">addVars</span><span class="p">(</span><span class="o">*</span><span class="n">indices</span><span class="p">,</span>
              <span class="n">lb</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="nf">float</span><span class="p">(</span><span class="sh">'</span><span class="s">inf</span><span class="sh">'</span><span class="p">),</span>
              <span class="n">obj</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
              <span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">CONTINUOUS</span><span class="p">,</span>
              <span class="n">name</span><span class="o">=</span><span class="sh">""</span><span class="p">)</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>The first argument is an iterable giving indices for accessing the
variables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>several integers (specifying the dimensions of the matrix)</p>
</li>
<li>
<p>several lists of scalars (each list specifies indices across one
dimension of the matrix)</p>
</li>
<li>
<p>one list of tuples, or a <a href="#tuplelist">tuplelist</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When the given name is a single string, it is subscripted by the index
of the generator expression. The names are stored as ASCII strings, you
should not use non-ASCII characters or spaces.</p>
</div>
<div style="page-break-after: always;"></div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>

<span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">model</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>
    <span class="c1"># 3D array of binary variables
</span>    <span class="n">x</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVars</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">BINARY</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">x</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">model</span><span class="p">.</span><span class="nf">update</span><span class="p">()</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">model</span><span class="p">.</span><span class="nf">getAttr</span><span class="p">(</span><span class="sh">"</span><span class="s">VarName</span><span class="sh">"</span><span class="p">,</span> <span class="n">model</span><span class="p">.</span><span class="nf">getVars</span><span class="p">()))</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>['x[0,0,0]', 'x[0,0,1]', 'x[0,0,2]', 'x[0,0,3]', 'x[0,1,0]', 'x[0,1,1]', 'x[0,1,2]', 'x[0,1,3]', 'x[0,2,0]', 'x[0,2,1]', 'x[0,2,2]', 'x[0,2,3]', 'x[1,0,0]', 'x[1,0,1]', 'x[1,0,2]', 'x[1,0,3]', 'x[1,1,0]', 'x[1,1,1]', 'x[1,1,2]', 'x[1,1,3]', 'x[1,2,0]', 'x[1,2,1]', 'x[1,2,2]', 'x[1,2,3]']</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>

<span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">model</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>
    <span class="c1"># Use arbitrary lists of immutable objects -&gt; tupledict
</span>    <span class="n">y</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVars</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">ub</span><span class="o">=</span><span class="nf">range</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span>
                      <span class="n">name</span><span class="o">=</span><span class="p">[</span><span class="sa">f</span><span class="sh">"</span><span class="s">y_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="sh">"</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)])</span>
    <span class="n">model</span><span class="p">.</span><span class="nf">update</span><span class="p">()</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">Variables names, upper bounds, and indices:</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">y</span><span class="p">.</span><span class="nf">items</span><span class="p">():</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">name: </span><span class="si">{</span><span class="n">var</span><span class="p">.</span><span class="n">VarName</span><span class="si">}</span><span class="s">, ub: </span><span class="si">{</span><span class="n">var</span><span class="p">.</span><span class="n">UB</span><span class="si">}</span><span class="s">, index: </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>Variables names, upper bounds, and indices:
name: y_0, ub: 0.0, index: (1, 7)
name: y_1, ub: 1.0, index: (1, 3)
name: y_2, ub: 2.0, index: (1, 2)
name: y_3, ub: 3.0, index: (5, 7)
name: y_4, ub: 4.0, index: (5, 3)
name: y_5, ub: 5.0, index: (5, 2)</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>

<span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">model</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>
    <span class="c1"># Use arbitrary list of tuples as indices
</span>    <span class="n">z</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVars</span><span class="p">(</span>
        <span class="p">[(</span><span class="mi">3</span><span class="p">,</span> <span class="sh">"</span><span class="s">a</span><span class="sh">"</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="sh">"</span><span class="s">b</span><span class="sh">"</span><span class="p">),</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="sh">"</span><span class="s">b</span><span class="sh">"</span><span class="p">),</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="sh">"</span><span class="s">c</span><span class="sh">"</span><span class="p">)],</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">z</span><span class="sh">"</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">model</span><span class="p">.</span><span class="nf">update</span><span class="p">()</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">Variables names and lower and upper bounds:</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">z</span><span class="p">.</span><span class="nf">items</span><span class="p">():</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">name: </span><span class="si">{</span><span class="n">var</span><span class="p">.</span><span class="n">VarName</span><span class="si">}</span><span class="s">, lb: </span><span class="si">{</span><span class="n">var</span><span class="p">.</span><span class="n">LB</span><span class="si">}</span><span class="s">, ub: </span><span class="si">{</span><span class="n">var</span><span class="p">.</span><span class="n">UB</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>Variables names and lower and upper bounds:
name: z[3,a], lb: 0.0, ub: inf
name: z[3,b], lb: 0.0, ub: inf
name: z[7,b], lb: 0.0, ub: inf
name: z[7,c], lb: 0.0, ub: inf</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_constraints_model_addconstr">6.3. Constraints, Model.addConstr()</h3>
<div class="paragraph">
<p>Like variables, constraints are also associated with a model. Use the
method
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/model.html#Model.addConstr">Model.addConstr()</a>
to add a constraint to a model.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">Model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span><span class="n">constr</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">""</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>constr</code> is a
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/tempconstr.html#TempConstr">TempConstr</a> object
that can take different types:</p>
</div>
<div style="page-break-after: always;"></div>
<div class="ulist">
<ul>
<li>
<p>Linear Constraint: <code>x + y &lt;= 1</code></p>
</li>
<li>
<p>Ranged Linear Constraint: <code>x + y == [1, 3]</code></p>
</li>
<li>
<p>Quadratic Constraint: <code>x*x + y*y + x*y &lt;= 1</code></p>
</li>
<li>
<p>Linear Matrix Constraint: <code>A @ x &lt;= 1</code></p>
</li>
<li>
<p>Quadratic Matrix Constraint: <code>x @ Q @ y &lt;= 2</code></p>
</li>
<li>
<p>Absolute Value Constraint: <code>x == abs_(y)</code></p>
</li>
<li>
<p>Logical Constraint: <code>x == and_(y, z)</code></p>
</li>
<li>
<p>Min or Max Constraint: <code>z == max_(x, y, constant=9)</code></p>
</li>
<li>
<p>Indicator Constraint: <code>(x == 1) &gt;&gt; (y + z &lt;= 5)</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>

<span class="c1"># Add constraint "\sum_{i=0}^{n-1} x_i &lt;= b" for any given n and b.
</span><span class="n">n</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">4</span>
<span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">(</span><span class="sh">"</span><span class="s">model</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVars</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">BINARY</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">x</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">c1</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="nf">sum</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="n">b</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">c1</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">model</span><span class="p">.</span><span class="nf">update</span><span class="p">()</span>

    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">RHS, sense = </span><span class="si">{</span><span class="n">c1</span><span class="p">.</span><span class="n">RHS</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">c1</span><span class="p">.</span><span class="n">Sense</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">row: </span><span class="si">{</span><span class="n">model</span><span class="p">.</span><span class="nf">getRow</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>RHS, sense = 4.0, &lt;
row: x[0] + x[1] + x[2] + x[3] + x[4] + x[5] + x[6] + x[7] + x[8] + x[9]</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>

<span class="c1"># Add constraints "x_i + y_j - x_i * y_j &gt;= 3".
</span><span class="n">n</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span>
<span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">(</span><span class="sh">"</span><span class="s">model</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVars</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">x</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVars</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">y</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
            <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">y</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="sh">"</span><span class="s">c_</span><span class="si">{</span><span class="n">i</span><span class="si">}{</span><span class="n">j</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">model</span><span class="p">.</span><span class="nf">update</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">model</span><span class="p">.</span><span class="nf">getQConstrs</span><span class="p">():</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Name: </span><span class="si">{</span><span class="n">c</span><span class="p">.</span><span class="n">QCName</span><span class="si">}</span><span class="s">, RHS: </span><span class="si">{</span><span class="n">c</span><span class="p">.</span><span class="n">QCRHS</span><span class="si">}</span><span class="s">, sense: </span><span class="si">{</span><span class="n">c</span><span class="p">.</span><span class="n">QCSense</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\t</span><span class="s">row: </span><span class="si">{</span><span class="n">model</span><span class="p">.</span><span class="nf">getQCRow</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>Name: c_00, RHS: 3.0, sense: &gt;
	row: x[0] + y[0] + [ -1.0 x[0] * y[0] ]
Name: c_01, RHS: 3.0, sense: &gt;
	row: x[0] + y[1] + [ -1.0 x[0] * y[1] ]
Name: c_10, RHS: 3.0, sense: &gt;
	row: x[1] + y[0] + [ -1.0 x[1] * y[0] ]
Name: c_11, RHS: 3.0, sense: &gt;
	row: x[1] + y[1] + [ -1.0 x[1] * y[1] ]
Name: c_20, RHS: 3.0, sense: &gt;
	row: x[2] + y[0] + [ -1.0 x[2] * y[0] ]
Name: c_21, RHS: 3.0, sense: &gt;
	row: x[2] + y[1] + [ -1.0 x[2] * y[1] ]</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_model_addconstrs">6.4. Model.addConstrs()</h3>
<div class="paragraph">
<p>To add multiple constraints to the model, use the
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/model.html#Model.addConstrs">Model.addConstrs()</a>
method which returns a Gurobi <a href="#tupledict">tupledict</a> that contains the newly
created constraints:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">Model</span><span class="p">.</span><span class="nf">addConstrs</span><span class="p">(</span><span class="n">generator</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">""</span><span class="p">)</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>

<span class="n">I</span> <span class="o">=</span> <span class="nf">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">J</span> <span class="o">=</span> <span class="p">[</span><span class="sh">"</span><span class="s">a</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">b</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">c</span><span class="sh">"</span><span class="p">]</span>
<span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">(</span><span class="sh">"</span><span class="s">model</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVars</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">x</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVars</span><span class="p">(</span><span class="n">J</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">y</span><span class="sh">"</span><span class="p">)</span>

    <span class="c1"># Add constraints x_i + y_j &lt;= 1 for all (i, j)
</span>    <span class="n">model</span><span class="p">.</span><span class="nf">addConstrs</span><span class="p">((</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">y</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">I</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">J</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">c</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">model</span><span class="p">.</span><span class="nf">update</span><span class="p">()</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">model</span><span class="p">.</span><span class="nf">getAttr</span><span class="p">(</span><span class="sh">"</span><span class="s">ConstrName</span><span class="sh">"</span><span class="p">,</span> <span class="n">model</span><span class="p">.</span><span class="nf">getConstrs</span><span class="p">()))</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>['c[0,a]', 'c[0,b]', 'c[0,c]', 'c[1,a]', 'c[1,b]', 'c[1,c]']</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_objective_function">6.5. Objective Function</h3>
<div class="paragraph">
<p>To set the model objective equal to a linear or a quadratic expression,
use the
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/model.html#Model.setObjective">Model.setObjective()</a>
method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">Model</span><span class="p">.</span><span class="nf">setObjective</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">sense</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">MINIMIZE</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>expr</code> can be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/linexpr.html#LinExpr">LinExpr</a>, a linear
expression
(constant plus pairs of coefficients/variables)</p>
</li>
<li>
<p><a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/quadexpr.html">QuadExpr</a>, a quadratic
expression
(linear expression plus triplets of coefficients/variables/variables)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>sense</code> is either <code>GRB.MINIMIZE</code> (the default) or <code>GRB.MAXIMIZE</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>

<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="c1"># Add linear objectives c^Tx
</span><span class="n">n</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">rand</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

<span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">(</span><span class="sh">"</span><span class="s">model</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVars</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">x</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">linexpr</span> <span class="o">=</span> <span class="n">gp</span><span class="p">.</span><span class="nf">quicksum</span><span class="p">(</span><span class="n">c_i</span> <span class="o">*</span> <span class="n">x_i</span> <span class="k">for</span> <span class="n">c_i</span><span class="p">,</span> <span class="n">x_i</span> <span class="ow">in</span> <span class="nf">zip</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">x</span><span class="p">.</span><span class="nf">values</span><span class="p">()))</span>
    <span class="n">model</span><span class="p">.</span><span class="nf">setObjective</span><span class="p">(</span><span class="n">linexpr</span><span class="p">)</span>
    <span class="n">model</span><span class="p">.</span><span class="nf">update</span><span class="p">()</span>

    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">obj: </span><span class="si">{</span><span class="n">model</span><span class="p">.</span><span class="nf">getObjective</span><span class="p">()</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>obj: 0.5262650100480577 x[0] + 0.31598755841732995 x[1] + 0.22589976835387182 x[2] + 0.26282494535866574 x[3] + 0.15402398277670748 x[4]</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>

<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="n">n</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">Q</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">rand</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>

<span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">(</span><span class="sh">"</span><span class="s">model</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVars</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">x</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">quadexpr</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># Add quadratic objective in the form x^T Q x
</span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">quadexpr</span> <span class="o">+=</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
    <span class="n">model</span><span class="p">.</span><span class="nf">setObjective</span><span class="p">(</span><span class="n">quadexpr</span><span class="p">)</span>
    <span class="n">model</span><span class="p">.</span><span class="nf">update</span><span class="p">()</span>

    <span class="c1"># Print objective expression
</span>    <span class="n">obj</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">getObjective</span><span class="p">()</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\n</span><span class="s">obj: </span><span class="si">{</span><span class="n">obj</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>obj: 0.0 + [ 0.35009519629328456 x[0] ^ 2 + 1.404423257261094 x[0] * x[1] + 0.5633033648985756 x[0] * x[2] + 0.4734482637245059 x[0] * x[3] + 0.9247814319759544 x[0] * x[4] + 0.3405485028613824 x[1] ^ 2 + 0.44137792273617116 x[1] * x[2] + 0.6874279686129943 x[1] * x[3] + 1.3001079227508634 x[1] * x[4] + 0.9103404225480711 x[2] ^ 2 + 0.17321865502582912 x[2] * x[3] + 0.8862661425951331 x[2] * x[4] + 0.3089399813193924 x[3] ^ 2 + 0.9932643804280612 x[3] * x[4] + 0.7498300379876675 x[4] ^ 2 ]</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_optimizing_for_multiple_objectives">6.6. Optimizing for Multiple Objectives</h3>
<div class="paragraph">
<p>Most practical business problems require compromises between multiple
contradictory objectives.
Gurobi supports two ways to
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/features/multiobjective.html">combine
multiple linear objectives</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Blended objectives.
The values of each objective is multiplied by a
coefficient, and the sum of these weighted values is the value of the solution.</p>
</li>
<li>
<p>Hierarchical objectives.
Gurobi performs multiple passes, optimizing
each time for one objective while preventing any degradation of the
value of the objectives from the previous passes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can build arbitrarily complex combinations of blended and
hierarchical objectives: all the objectives that have the same priority
are blended together, and the (groups of) objectives of different priority
are handled in successive optimization passes.</p>
</div>
<div class="paragraph">
<p>Each objective also has a <em>weight</em> with wich the value of the linear
expression is multiplied. That weight defaults to 1, but can be changed
to build combinations of blended objectives, or to change the sense of
the optimization for a single objective.</p>
</div>
<div class="paragraph">
<p>Finally, objectives have tolerances (both absolute and relative). These
tolerances are used to relax the value of the objective in subsequent
passes.  For example, if the value of the first objective is 50 in the
solution found during the first pass, and the relative tolerance for
this objective is 0.1, the value of that objective in subsequent passes
will be allowed to degrade by at most 5 units.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="nf">setObjectiveN</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">abstol</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">reltol</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">''</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="c1"># Primary objective: x + 2 y
</span><span class="n">model</span><span class="p">.</span><span class="nf">setObjectiveN</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Alternative, lower priority objectives: 3 y + z and x + z
</span><span class="n">model</span><span class="p">.</span><span class="nf">setObjectiveN</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">y</span> <span class="o">+</span> <span class="n">z</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">priority</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">model</span><span class="p">.</span><span class="nf">setObjectiveN</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">z</span><span class="p">,</span>   <span class="mi">2</span><span class="p">,</span> <span class="n">priority</span><span class="o">=-</span><span class="mi">2</span><span class="p">)</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_sos_constraints">6.7. SOS Constraints</h3>
<div class="paragraph">
<p>A Special-Ordered Set, or
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/concepts/modeling/constraints.html#sos-constraints">SOS
constraint</a>, is a highly specialized constraint that places restrictions
on the values that variables in a given list can take.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SOS constraint of type 1 (SOS1): at most one variable is allowed to
take a non-zero value.</p>
</li>
<li>
<p>SOS constraint of type 2 (SOS2): at most two variables are allowed to
take non-zero values, and those non-zero variables must be contiguous.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>Use <a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/model.html#Model.addSOS">Model.addSOS()</a>
to add such constraints:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">Model</span><span class="p">.</span><span class="nf">addSOS</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="nb">vars</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>type</code>: the type of SOS constraint. Can be either <code>GRB.SOS_TYPE1</code>
or <code>GRB.SOS_TYPE2</code>.</p>
</li>
<li>
<p><code>vars</code>: list of variables that participate in the consstraint.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>For example, the MIP formulation of</p>
</div>
<div class="stemblock">
<div class="content">
\[z = max(x,y,3)\]
</div>
</div>
<div class="paragraph">
<p>using SOS1 constraints, is:</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{align}
z = x + s_1 \\
z = y + s_2 \\
z = 3 + s_3 \\
v_1 + v_2 + v_3 = 1 \\
SOS1(s_1, v_1) \\
SOS1(s_2, v_2) \\
SOS1(s_3, v_3) \\
s_1, s_2, s_3 \in \mathbb{R}^+ \\
v_1, v_2, v_3 \in \{0,1\}
\end{align}\]
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_general_constraints">6.8. General Constraints</h3>
<div class="paragraph">
<p><a href="https://docs.gurobi.com/projects/optimizer/en/12.0/concepts/modeling/constraints.html#general-constraints">General
constraints</a> allow you to directly model complex relationships between
variables.</p>
</div>
<div class="sect3">
<h4 id="_simple_constraints">6.8.1. Simple Constraints</h4>
<div class="paragraph">
<p><a href="https://docs.gurobi.com/projects/optimizer/en/12.0/concepts/modeling/constraints.html#subsubsectiongenconstrsimple">Simple
constraints</a> are a modeling convenience. They allow you to state fairly
simple relationships between variables (min, max, absolute value,
logical OR, etc.). Techniques for translating these constraints into
lower-level modeling objects (typically using auxiliary binary variables
and linear or SOS constraints) are well known and can be found in
optimization modeling textbooks.</p>
</div>
<div class="paragraph">
<p>They include max, min, abs, and, or, norm, indicator and
piecewise-linear constraints. In Python, you can use the
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/func_utility.html">General Constraints Helper
Functions</a> to create equality constraints between one variable and such
an expression.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">m</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span><span class="n">z</span> <span class="o">==</span> <span class="n">gp</span><span class="p">.</span><span class="nf">and_</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
<span class="n">m</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span><span class="n">z</span> <span class="o">==</span> <span class="n">gp</span><span class="p">.</span><span class="nf">max_</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_nonlinear_constraints">6.8.2. Nonlinear constraints</h4>
<div class="paragraph">
<p>Nonlinear constraints are relationships of the form \(y=f(x)\) where
\(x\) is a vector of Gurobi variables, \(y\) is a single Gurobi
variable and \(f\) is a function \(f:\mathbb{R}^n\rightarrow
\mathbb{R}\). The function  may be composed of arithmetic operations
(addition, subtraction, multiplication) and various
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/concepts/modeling/constraints.html#function-constraints">univariate
nonlinear functions</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Polynomial: \(y=p_0x^n + p_1x^{n-1} + \cdots + p_{n-1}x + p_n\)</p>
</li>
<li>
<p>Natural exponential: \(y=e^x\)</p>
</li>
<li>
<p>Exponential: \(y=a^x\), where \(a&gt;0\) is the base for the exponential function.</p>
</li>
<li>
<p>Natural logarithm: \(y=ln(x)\)</p>
</li>
<li>
<p>Logarithm: \(y=log_a(x)\) where \(a&gt;0\) is the base for the logarithmic function.</p>
</li>
<li>
<p>Logistic: \(y=\frac{1}{1+e^{-x}}\)</p>
</li>
<li>
<p>Power: \(y=x^a\), where \(x\geq 0\) for any fractional \(a\) and \(x&gt;0\) for \(a&lt;0\).</p>
</li>
<li>
<p>Sine: \(y=sin(x)\)</p>
</li>
<li>
<p>Cosine: \(y=cos(x)\)</p>
</li>
<li>
<p>Tangent: \(y=tan(x)\)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">model</span><span class="p">.</span><span class="nf">addGenConstrNL</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">nlfunc</span><span class="p">.</span><span class="nf">sin</span><span class="p">(</span><span class="mf">2.5</span> <span class="o">*</span> <span class="n">x1</span><span class="p">)</span> <span class="o">+</span> <span class="n">x2</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that, as for simple constraints, a nonlinear expression can only be used
in an equality constraint with a single variable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">nlfunc</span>

<span class="c1"># Minimize sin(2.5 x1) + x2
# s.t.     -1 &lt;= x1, x2 &lt;= 1
</span>
<span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Env</span><span class="p">()</span> <span class="k">as</span> <span class="n">env</span><span class="p">,</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">(</span><span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>
    <span class="n">x1</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVar</span><span class="p">(</span><span class="n">lb</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">x1</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">x2</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVar</span><span class="p">(</span><span class="n">lb</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">x2</span><span class="sh">"</span><span class="p">)</span>

    <span class="n">y</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVar</span><span class="p">(</span><span class="n">lb</span><span class="o">=-</span><span class="nf">float</span><span class="p">(</span><span class="sh">"</span><span class="s">inf</span><span class="sh">"</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">y</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">model</span><span class="p">.</span><span class="nf">addGenConstrNL</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">nlfunc</span><span class="p">.</span><span class="nf">sin</span><span class="p">(</span><span class="mf">2.5</span> <span class="o">*</span> <span class="n">x1</span><span class="p">)</span> <span class="o">+</span> <span class="n">x2</span><span class="p">)</span>
    <span class="n">model</span><span class="p">.</span><span class="nf">setObjective</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

    <span class="n">model</span><span class="p">.</span><span class="nf">optimize</span><span class="p">()</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">x1=</span><span class="si">{</span><span class="n">x1</span><span class="p">.</span><span class="n">X</span><span class="si">}</span><span class="s">  x2=</span><span class="si">{</span><span class="n">x2</span><span class="p">.</span><span class="n">X</span><span class="si">}</span><span class="s">  obj=</span><span class="si">{</span><span class="n">y</span><span class="p">.</span><span class="n">X</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>Gurobi Optimizer version 12.0.3 build v12.0.3rc0 (mac64[arm] - Darwin 24.6.0 24G231)

CPU model: Apple M4 Pro
Thread count: 12 physical cores, 12 logical processors, using up to 12 threads

Optimize a model with 0 rows, 3 columns and 0 nonzeros
Model fingerprint: 0x00339c10
Model has 1 general nonlinear constraint (1 nonlinear terms)
Variable types: 3 continuous, 0 integer (0 binary)
Coefficient statistics:
  Matrix range     [0e+00, 0e+00]
  Objective range  [1e+00, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [0e+00, 0e+00]
Presolve model has 1 nlconstr
Added 2 variables to disaggregate expressions.
Presolve time: 0.00s
Presolved: 10 rows, 6 columns, 21 nonzeros
Presolved model has 1 nonlinear constraint(s)

Solving non-convex MINLP

Variable types: 6 continuous, 0 integer (0 binary)
Found heuristic solution: objective -2.0000000

Explored 1 nodes (0 simplex iterations) in 0.00 seconds (0.00 work units)
Thread count was 12 (of 12 available processors)

Solution count 1: -2 

Optimal solution found (tolerance 1.00e-04)
Best objective -1.999999998349e+00, best bound -2.000000000000e+00, gap 0.0000%
x1=-0.6282022274684884  x2=-1.0  obj=-1.9999999983490295</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_matrix_based_api">7. Matrix-based API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Term-based modeling where the variables and constraints are constructed
one at a time can be time-consuming in Python.</p>
</div>
<div class="paragraph">
<p>Gurobi&#8217;s matrix-friendly API enables matrix based operations which can
be significantly faster than the term-based modeling. The Matrix API
complements the capabilities of term-based modeling leaning on Numpy
concepts and semantics such as vectorization and broadcasting.</p>
</div>
<div class="paragraph">
<p>The relevant objects/methods are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/model.html#Model.addMVar">Model.addMVar()</a>: Add an <a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/mvar.html#MVar">MVar</a> object to a model. An <code>MVar</code> acts like a NumPy ndarray of Gurobi decision variables. An <code>MVar</code> can have an arbitrary number of dimensions, defined by the <code>shape</code> argument.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="nf">addMVar</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="nf">float</span><span class="p">(</span><span class="sh">'</span><span class="s">inf</span><span class="sh">'</span><span class="p">),</span> <span class="n">obj</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">CONTINUOUS</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">''</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="c1"># A vector of 3 continuous variables
</span><span class="n">v</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addMVar</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="c1"># A 5x10 matrix of binary variables
</span><span class="n">x</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addMVar</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">BINARY</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Overloaded operators such as Python matrix multiply (<code>@</code>) build
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/mlinexpr.html#">MLinExpr</a>
objects.
Typically, you would multiply a 2-D matrix by a 1-D <code>MVar</code> object (e.g. <code>expr = A @ x</code>).
Most arithmetic operators are supported on <code>MLinExpr</code> objects, including
addition and subtraction (e.g., <code>expr = A @ x - B @ y</code>), multiplication by
a constant (e.g. <code>expr = 2 * A @ x</code>), and point-wise multiplication with
an ndarray or a sparse matrix.</p>
</li>
<li>
<p>Overloaded relational operators (<code>==</code>, <code>&lt;=</code> and <code>&gt;=</code>) are used to build
TempConstr objects from MLinExpr objects. For example, <code>A @ x &lt;= 1</code> and
<code>A @ x == B @ y</code> are both linear matrix constraints.</p>
</li>
<li>
<p>Finally, <a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/model.html#Model.addConstr">Model.addConstr()</a> is used to add that constraint to the model, possibly giving it
a name.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>addConstr(constr, name="")</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>Here&#8217;s the example from the beginning of the course:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">x</span> <span class="o">=</span> <span class="n">m</span><span class="p">.</span><span class="nf">addMVar</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="p">.</span><span class="n">BINARY</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">x</span><span class="sh">"</span><span class="p">)</span>   <b class="conum">(1)</b>

<span class="n">val</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">])</span>
<span class="n">row</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">col</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">sp</span><span class="p">.</span><span class="nf">csr_matrix</span><span class="p">((</span><span class="n">val</span><span class="p">,</span> <span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)),</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>   <b class="conum">(2)</b>

<span class="n">rhs</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mf">4.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">])</span>                          <b class="conum">(3)</b>
<span class="n">m</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span><span class="n">A</span> <span class="o">@</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">rhs</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">c</span><span class="sh">"</span><span class="p">)</span>                  <b class="conum">(4)</b>

<span class="n">obj</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">])</span>
<span class="n">m</span><span class="p">.</span><span class="nf">setObjective</span><span class="p">(</span><span class="n">obj</span> <span class="o">@</span> <span class="n">x</span><span class="p">,</span> <span class="n">GRB</span><span class="p">.</span><span class="n">MAXIMIZE</span><span class="p">)</span>                <b class="conum">(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Create variables</p>
</li>
<li>
<p>Build a (sparse) matrix</p>
</li>
<li>
<p>Build an rhs vector</p>
</li>
<li>
<p>Add constraints</p>
</li>
<li>
<p>Set objective</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>An example of using the matrix-based API was given in <a href="#matrix-api-example">Matrix-API example</a>
at the very beginning of this course.</p>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>Here is another with timing of the difference.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">from</span> <span class="n">timeit</span> <span class="kn">import</span> <span class="n">default_timer</span>

<span class="n">n</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">Q</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">rand</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">term_based</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">(</span><span class="sh">"</span><span class="s">term-based</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addVars</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">x</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span>
            <span class="n">gp</span><span class="p">.</span><span class="nf">quicksum</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
                                              <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="mi">10</span>
        <span class="p">)</span>

<span class="k">def</span> <span class="nf">matrix_api</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nc">Model</span><span class="p">(</span><span class="sh">"</span><span class="s">matrix-based</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">addMVar</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">x</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">model</span><span class="p">.</span><span class="nf">addConstr</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">T</span> <span class="o">@</span> <span class="n">Q</span> <span class="o">@</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">)</span>

<span class="nf">matrix_api</span><span class="p">()</span>  <span class="c1"># To create the default env
</span><span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="p">[</span><span class="n">term_based</span><span class="p">,</span> <span class="n">matrix_api</span><span class="p">]:</span>
    <span class="n">start</span> <span class="o">=</span> <span class="nf">default_timer</span><span class="p">()</span>
    <span class="nf">f</span><span class="p">()</span>
    <span class="n">end</span> <span class="o">=</span> <span class="nf">default_timer</span><span class="p">()</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Running </span><span class="si">{</span><span class="n">f</span><span class="p">.</span><span class="n">__name__</span><span class="si">}</span><span class="s"> took </span><span class="si">{</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="si">}</span><span class="s"> seconds</span><span class="sh">"</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>Running term_based took 3.1411980830016546 seconds
Running matrix_api took 0.073522040998796 seconds</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_interacting_with_the_model">8. Interacting with the Model</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_attributes">8.1. Attributes</h3>
<div class="paragraph">
<p>The primary mechanism for querying and modifying properties of a Gurobi
object is through the
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/optimizer/html/reference/attributes.html">attribute
interface</a>.  Attributes exist on instances of Model, Variable, all types
of constraints, and more.
Here are some of the most commonly used:</p>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p><a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/attributes/model.html">Model</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>number of modeling elements of each type (<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/attributes/model.html#attrnumconstrs">NumConstrs</a>, <a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/attributes/model.html#numvars">NumVars</a>, etc.)</p>
</li>
<li>
<p>information about the type of model (<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/attributes/model.html#ismip">IsMip</a>, <a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/attributes/model.html#ismultiobj">IsMultiObj</a>, etc.), its statistics (<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/attributes/model.html#solcount">SolCount</a>, <a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/attributes/model.html#nodecount">NodeCount</a>, etc.)</p>
</li>
<li>
<p>information about the solutions found (<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/attributes/model.html#solcount">SolCount</a>), the best known bound (<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/attributes/model.html#objbound">ObjBound</a>), the gap (<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/attributes/model.html#mipgap">MipGap</a>), etc.</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p><a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/attributes/variable.html">Variables</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>lower (<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/attributes/variable.html#lb">LB</a>) and upper (<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/attributes/variable.html#ub">UB</a>) bounds</p>
</li>
<li>
<p>value in a MIP start vector (<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/attributes/variable.html#start">Start</a>)</p>
</li>
<li>
<p>value in the best solution (<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/attributes/variable.html#x">X</a>)</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p><a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/attributes/constraintlinear.html">Constraints</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>right-hand side value (<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/attributes/constraintlinear.html#rhs">RHS</a>)</p>
</li>
<li>
<p>dual value in the best solution (<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/attributes/constraintlinear.html#pi">Pi</a>)</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>

<span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="sh">"</span><span class="s">data/glass4.mps.bz2</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>
    <span class="n">model</span><span class="p">.</span><span class="nf">optimize</span><span class="p">()</span>

    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">****************** SOLUTION ******************</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\t</span><span class="s">Status       : </span><span class="si">{</span><span class="n">model</span><span class="p">.</span><span class="n">Status</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\t</span><span class="s">Obj          : </span><span class="si">{</span><span class="n">model</span><span class="p">.</span><span class="n">ObjVal</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\t</span><span class="s">SolutionCount: </span><span class="si">{</span><span class="n">model</span><span class="p">.</span><span class="n">SolCount</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\t</span><span class="s">Runtime      : </span><span class="si">{</span><span class="n">model</span><span class="p">.</span><span class="n">Runtime</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\t</span><span class="s">MIPGap       : </span><span class="si">{</span><span class="n">model</span><span class="p">.</span><span class="n">MIPGap</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">model</span><span class="p">.</span><span class="nf">getVars</span><span class="p">()[:</span><span class="mi">20</span><span class="p">]:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\t</span><span class="si">{</span><span class="n">var</span><span class="p">.</span><span class="n">VarName</span><span class="si">}</span><span class="s"> = </span><span class="si">{</span><span class="n">var</span><span class="p">.</span><span class="n">X</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>Read MPS format model from file data/glass4.mps.bz2
Reading time = 0.03 seconds
glass4: 396 rows, 322 columns, 1815 nonzeros
Gurobi Optimizer version 12.0.3 build v12.0.3rc0 (mac64[arm] - Darwin 24.6.0 24G231)

CPU model: Apple M4 Pro
Thread count: 12 physical cores, 12 logical processors, using up to 12 threads

Optimize a model with 396 rows, 322 columns and 1815 nonzeros
Model fingerprint: 0x18b19fdf
Variable types: 20 continuous, 302 integer (0 binary)
Coefficient statistics:
  Matrix range     [1e+00, 8e+06]
  Objective range  [1e+00, 1e+06]
  Bounds range     [1e+00, 8e+02]
  RHS range        [1e+00, 8e+06]
Presolve removed 6 rows and 6 columns
Presolve time: 0.00s
Presolved: 390 rows, 316 columns, 1803 nonzeros
Variable types: 19 continuous, 297 integer (297 binary)
Found heuristic solution: objective 3.133356e+09

Root relaxation: objective 8.000024e+08, 72 iterations, 0.00 seconds (0.00 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0 8.0000e+08    0   72 3.1334e+09 8.0000e+08  74.5%     -    0s
H    0     0                    2.600019e+09 8.0000e+08  69.2%     -    0s
H    0     0                    2.366684e+09 8.0000e+08  66.2%     -    0s
     0     0 8.0000e+08    0   72 2.3667e+09 8.0000e+08  66.2%     -    0s
     0     0 8.0000e+08    0   72 2.3667e+09 8.0000e+08  66.2%     -    0s
     0     0 8.0000e+08    0   77 2.3667e+09 8.0000e+08  66.2%     -    0s
     0     0 8.0000e+08    0   76 2.3667e+09 8.0000e+08  66.2%     -    0s
     0     2 8.0000e+08    0   75 2.3667e+09 8.0000e+08  66.2%     -    0s
H   27    53                    2.000015e+09 8.0000e+08  60.0%  44.0    0s
H   28    53                    2.000015e+09 8.0000e+08  60.0%  43.9    0s
H  132   173                    1.991127e+09 8.0000e+08  59.8%  18.2    0s
H  275   285                    1.977794e+09 8.0000e+08  59.6%  12.5    0s
H 1292  1340                    1.966683e+09 8.0000e+08  59.3%   6.3    0s
H 1359  1338                    1.900015e+09 8.0000e+08  57.9%   6.3    0s
H 2238  1917                    1.900015e+09 8.0000e+08  57.9%   6.1    0s
H 2769  2163                    1.800016e+09 8.0000e+08  55.6%   5.5    0s
H 3430  2418                    1.800016e+09 8.0000e+08  55.6%   5.1    0s
H 3573  2282                    1.750015e+09 8.0000e+08  54.3%   4.9    0s
* 5705  3167              75    1.740016e+09 8.0000e+08  54.0%   4.3    0s
* 5708  3075              76    1.722239e+09 8.0000e+08  53.5%   4.3    0s
H 5922  3078                    1.700016e+09 8.0000e+08  52.9%   4.3    0s
* 6065  2959              67    1.700016e+09 8.0000e+08  52.9%   4.2    0s
* 7952  5105              93    1.700015e+09 8.0000e+08  52.9%   3.9    0s
H 9574  4973                    1.666681e+09 8.0000e+08  52.0%   3.7    0s
H13664  7470                    1.666680e+09 8.0000e+08  52.0%   3.6    0s
*16301  9211              79    1.600013e+09 8.0000e+08  50.0%   3.6    0s
H17437  9377                    1.583346e+09 8.0000e+08  49.5%   3.6    0s
*19449 11033              54    1.575014e+09 8.0000e+08  49.2%   3.7    0s
*20221 10692              71    1.533348e+09 8.0000e+08  47.8%   3.8    0s
H22213  8731                    1.475014e+09 8.0000e+08  45.8%   4.0    0s
H32855 12074                    1.425014e+09 8.0001e+08  43.9%   3.7    0s
H35919 13342                    1.400014e+09 9.0000e+08  35.7%   3.7    0s
*42393 13855              57    1.400013e+09 9.0401e+08  35.4%   5.3    2s
*73222  7138              71    1.375015e+09 1.1000e+09  20.0%   7.7    3s
*73524  3671              62    1.200013e+09 1.1000e+09  8.33%   7.8    3s

Cutting planes:
  Learned: 1
  Gomory: 7
  Implied bound: 8
  MIR: 26
  Flow cover: 35
  RLT: 4
  Relax-and-lift: 17

Explored 76434 nodes (584415 simplex iterations) in 3.68 seconds (6.76 work units)
Thread count was 12 (of 12 available processors)

Solution count 10: 1.20001e+09 1.37501e+09 1.40001e+09 ... 1.60001e+09

Optimal solution found (tolerance 1.00e-04)
Best objective 1.200012600000e+09, best bound 1.200003400000e+09, gap 0.0008%
****************** SOLUTION ******************
	Status       : 2
	Obj          : 1200012600.0
	SolutionCount: 10
	Runtime      : 3.6842780113220215
	MIPGap       : 7.666586172876269e-06


	x1 = 0.0
	x2 = 700.0
	x3 = 1000.0
	x4 = 1000.0
	x5 = 400.0
	x6 = 200.0
	x7 = 200.0
	x8 = 500.0
	x9 = 700.0
	x10 = 1200.0
	x11 = 0.0
	x12 = 0.0
	x13 = 200.0
	x14 = 800.0
	x15 = 800.0
	x16 = 600.0
	x17 = 300.0
	x18 = 300.0
	x19 = 200.0
	x20 = 1.0</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_parameters">8.2. Parameters</h3>
<div class="paragraph">
<p><a href="https://docs.gurobi.com/projects/optimizer/en/12.0/concepts/parameters/groups.html#secparametergroups">Parameters</a>
control the mechanics of the Gurobi Optimizer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>

<span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="sh">"</span><span class="s">data/glass4.mps.bz2</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>
    <span class="n">model</span><span class="p">.</span><span class="n">params</span><span class="p">.</span><span class="n">Threads</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">model</span><span class="p">.</span><span class="n">params</span><span class="p">.</span><span class="n">TimeLimit</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">model</span><span class="p">.</span><span class="nf">optimize</span><span class="p">()</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="listingblock">
<div class="content">
<pre>Read MPS format model from file data/glass4.mps.bz2
Reading time = 0.03 seconds
glass4: 396 rows, 322 columns, 1815 nonzeros
Set parameter Threads to value 1
Set parameter TimeLimit to value 10
Gurobi Optimizer version 12.0.3 build v12.0.3rc0 (mac64[arm] - Darwin 24.6.0 24G231)

CPU model: Apple M4 Pro
Thread count: 12 physical cores, 12 logical processors, using up to 1 threads

Non-default parameters:
TimeLimit  10
Threads  1

Optimize a model with 396 rows, 322 columns and 1815 nonzeros
Model fingerprint: 0x18b19fdf
Variable types: 20 continuous, 302 integer (0 binary)
Coefficient statistics:
  Matrix range     [1e+00, 8e+06]
  Objective range  [1e+00, 1e+06]
  Bounds range     [1e+00, 8e+02]
  RHS range        [1e+00, 8e+06]
Presolve removed 6 rows and 6 columns
Presolve time: 0.00s
Presolved: 390 rows, 316 columns, 1803 nonzeros
Variable types: 19 continuous, 297 integer (297 binary)
Found heuristic solution: objective 3.133356e+09

Root relaxation: objective 8.000024e+08, 72 iterations, 0.00 seconds (0.00 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0 8.0000e+08    0   72 3.1334e+09 8.0000e+08  74.5%     -    0s
H    0     0                    2.600019e+09 8.0000e+08  69.2%     -    0s
     0     0 8.0000e+08    0   72 2.6000e+09 8.0000e+08  69.2%     -    0s
     0     0 8.0000e+08    0   72 2.6000e+09 8.0000e+08  69.2%     -    0s
     0     0 8.0000e+08    0   76 2.6000e+09 8.0000e+08  69.2%     -    0s
     0     0 8.0000e+08    0   76 2.6000e+09 8.0000e+08  69.2%     -    0s
H    0     0                    2.500018e+09 8.0000e+08  68.0%     -    0s
H    0     0                    2.400019e+09 8.0000e+08  66.7%     -    0s
     0     2 8.0000e+08    0   76 2.4000e+09 8.0000e+08  66.7%     -    0s
H   52    52                    2.288909e+09 8.0000e+08  65.0%   4.1    0s
H   52    52                    2.200018e+09 8.0000e+08  63.6%   4.1    0s
H   52    52                    2.150019e+09 8.0000e+08  62.8%   4.1    0s
H   52    52                    2.133352e+09 8.0000e+08  62.5%   4.1    0s
H   54    54                    2.000018e+09 8.0000e+08  60.0%   4.1    0s
H  461   419                    2.000018e+09 8.0000e+08  60.0%   4.1    0s
H  461   419                    2.000017e+09 8.0000e+08  60.0%   4.1    0s
H  461   411                    1.950017e+09 8.0000e+08  59.0%   4.1    0s
H  461   411                    1.933350e+09 8.0000e+08  58.6%   4.1    0s
H  461   411                    1.900017e+09 8.0000e+08  57.9%   4.1    0s
H  547   479                    1.900017e+09 8.0000e+08  57.9%   4.3    0s
H  688   536                    1.900017e+09 8.0000e+08  57.9%   4.4    0s
H  708   526                    1.900016e+09 8.0000e+08  57.9%   4.4    0s
H  708   501                    1.866683e+09 8.0000e+08  57.1%   4.4    0s
*  735   483             126    1.833351e+09 8.0000e+08  56.4%   4.5    0s
H  795   495                    1.833350e+09 8.0000e+08  56.4%   4.5    0s
H  795   475                    1.800017e+09 8.0000e+08  55.6%   4.5    0s
H  795   457                    1.800017e+09 8.0000e+08  55.6%   4.5    0s
H  958   509                    1.800017e+09 8.0000e+08  55.6%   4.4    0s
* 1465   722              79    1.800015e+09 8.0000e+08  55.6%   4.3    0s
H 3508  2215                    1.800015e+09 8.0000e+08  55.6%   3.9    0s
H 3508  2050                    1.783348e+09 8.0000e+08  55.1%   3.9    0s
H 4508  2716                    1.700014e+09 8.0000e+08  52.9%   3.9    0s
H 7156  4482                    1.700014e+09 8.0000e+08  52.9%   4.0    1s
H 8150  5180                    1.700014e+09 8.0000e+08  52.9%   3.9    1s
H10308  6336                    1.700014e+09 8.4158e+08  50.5%   4.0    2s
H10308  6018                    1.700014e+09 8.4158e+08  50.5%   4.0    2s
H10411  5783                    1.700013e+09 8.5400e+08  49.8%   4.2    3s
H10411  5494                    1.700013e+09 8.5400e+08  49.8%   4.2    3s
 10530  5577 1.2000e+09   60  111 1.7000e+09 8.8337e+08  48.0%   4.8    5s
H10625  5358                    1.650013e+09 8.9436e+08  45.8%   4.9    6s
H10631  5093                    1.633347e+09 8.9439e+08  45.2%   4.9    6s
H10708  4888                    1.600013e+09 8.9673e+08  44.0%   5.1    6s

Cutting planes:
  Learned: 1
  Gomory: 6
  Implied bound: 7
  Projected implied bound: 2
  MIR: 35
  Flow cover: 19
  RLT: 3
  Relax-and-lift: 12

Explored 17016 nodes (121739 simplex iterations) in 10.00 seconds (15.51 work units)
Thread count was 1 (of 12 available processors)

Solution count 10: 1.60001e+09 1.63335e+09 1.65001e+09 ... 1.70001e+09

Time limit reached
Best objective 1.600013400000e+09, best bound 9.000058582310e+08, gap 43.7501%</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_callbacks">8.3. Callbacks</h3>
<div class="paragraph">
<p>A callback is a user-defined function invoked by Gurobi while the
optimization process is going on. They enable more control over the
optimization. They can be used to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>customize the termination of the solve</p>
</li>
<li>
<p>add user cuts and lazy constraints</p>
</li>
<li>
<p>add custom feasible solutions</p>
</li>
<li>
<p>monitor the progress of optimization</p>
</li>
<li>
<p>customize the optimization progress display</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A callback must be a function (actually, any callable object)
that accepts two arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>model</code>: the model that is being solved</p>
</li>
<li>
<p><code>where</code>: from where is
the Gurobi Optimizer is the callback invoked (presolve, simplex,
barrier, MIP, at a node, etc.)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A callback can query information from the solver using
<a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/model.html#Model.cbGet">Model.cbGet()</a>. The
type of information that can be queried depends on from <code>where</code> the
callback is invoked. For example, when <code>where == PRESOLVE</code>, you can
query the number of rows removed using <code>what == PRE_ROWDEL</code>.  All the
callback code values that you can query are listed
<a href="https://docs.gurobi.com/projects/optimizer/en/current/reference/numericcodes/callbacks.html">here</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">gurobipy</span> <span class="k">as</span> <span class="n">gp</span>
<span class="kn">from</span> <span class="n">gurobipy</span> <span class="kn">import</span> <span class="n">GRB</span>
<span class="kn">from</span> <span class="n">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="c1"># Used by the callback to store or retrieve information
</span><span class="k">class</span> <span class="nc">CallbackData</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">invocations</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># The callback, the function that will be invoked
</span><span class="k">def</span> <span class="nf">mycallback</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">where</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">cbdata</span><span class="p">):</span>
    <span class="c1"># We're only interested in this case
</span>    <span class="k">if</span> <span class="n">where</span> <span class="o">==</span> <span class="n">GRB</span><span class="p">.</span><span class="n">Callback</span><span class="p">.</span><span class="n">MIP</span><span class="p">:</span>
        <span class="n">cbdata</span><span class="p">.</span><span class="n">invocations</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="c1"># Get information from the model
</span>        <span class="n">nodecnt</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="nf">cbGet</span><span class="p">(</span><span class="n">GRB</span><span class="p">.</span><span class="n">Callback</span><span class="p">.</span><span class="n">MIP_NODCNT</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nodecnt</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
            <span class="c1"># Terminate the search
</span>            <span class="n">model</span><span class="p">.</span><span class="nf">terminate</span><span class="p">()</span>


<span class="c1"># Create a model from an instance file
</span><span class="k">with</span> <span class="n">gp</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="sh">"</span><span class="s">data/glass4.mps.bz2</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">model</span><span class="p">:</span>
    <span class="c1"># Create the object to store/retrieve information
</span>    <span class="n">cbdata</span> <span class="o">=</span> <span class="nc">CallbackData</span><span class="p">()</span>
    <span class="c1"># Create a callable with two args: model and where
</span>    <span class="n">callback_func</span> <span class="o">=</span> <span class="nf">partial</span><span class="p">(</span><span class="n">mycallback</span><span class="p">,</span> <span class="n">cbdata</span><span class="o">=</span><span class="n">cbdata</span><span class="p">)</span>

    <span class="c1"># Optimize, with the callback
</span>    <span class="n">model</span><span class="p">.</span><span class="nf">optimize</span><span class="p">(</span><span class="n">callback_func</span><span class="p">)</span>

    <span class="c1"># Confirm the callback was invoked
</span>    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">MIP Callback was invoked </span><span class="si">{</span><span class="n">cbdata</span><span class="p">.</span><span class="n">invocations</span><span class="si">}</span><span class="s"> times.</span><span class="sh">"</span><span class="p">)</span></code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="listingblock">
<div class="content">
<pre>Read MPS format model from file data/glass4.mps.bz2
Reading time = 0.02 seconds
glass4: 396 rows, 322 columns, 1815 nonzeros
Gurobi Optimizer version 12.0.3 build v12.0.3rc0 (mac64[arm] - Darwin 24.6.0 24G231)

CPU model: Apple M4 Pro
Thread count: 12 physical cores, 12 logical processors, using up to 12 threads

Optimize a model with 396 rows, 322 columns and 1815 nonzeros
Model fingerprint: 0x18b19fdf
Variable types: 20 continuous, 302 integer (0 binary)
Coefficient statistics:
  Matrix range     [1e+00, 8e+06]
  Objective range  [1e+00, 1e+06]
  Bounds range     [1e+00, 8e+02]
  RHS range        [1e+00, 8e+06]
Presolve removed 6 rows and 6 columns
Presolve time: 0.00s
Presolved: 390 rows, 316 columns, 1803 nonzeros
Variable types: 19 continuous, 297 integer (297 binary)
Found heuristic solution: objective 3.133356e+09

Root relaxation: objective 8.000024e+08, 72 iterations, 0.00 seconds (0.00 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0 8.0000e+08    0   72 3.1334e+09 8.0000e+08  74.5%     -    0s
H    0     0                    2.600019e+09 8.0000e+08  69.2%     -    0s
H    0     0                    2.366684e+09 8.0000e+08  66.2%     -    0s
     0     0 8.0000e+08    0   72 2.3667e+09 8.0000e+08  66.2%     -    0s
     0     0 8.0000e+08    0   72 2.3667e+09 8.0000e+08  66.2%     -    0s
     0     0 8.0000e+08    0   77 2.3667e+09 8.0000e+08  66.2%     -    0s
     0     0 8.0000e+08    0   76 2.3667e+09 8.0000e+08  66.2%     -    0s
     0     2 8.0000e+08    0   75 2.3667e+09 8.0000e+08  66.2%     -    0s
H   27    53                    2.000015e+09 8.0000e+08  60.0%  44.0    0s
H   28    53                    2.000015e+09 8.0000e+08  60.0%  43.9    0s

Cutting planes:
  Gomory: 91
  Cover: 2
  Implied bound: 40
  MIR: 2
  RLT: 72
  Relax-and-lift: 44
  PSD: 7

Explored 112 nodes (2811 simplex iterations) in 0.07 seconds (0.09 work units)
Thread count was 12 (of 12 available processors)

Solution count 5: 2.00002e+09 2.00002e+09 2.36668e+09 ... 3.13336e+09

Solve interrupted
Best objective 2.000015200000e+09, best bound 8.000035418612e+08, gap 60.0001%

User-callback calls 600, time in user-callback 0.00 sec
MIP Callback was invoked 117 times.</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>Other methods of interest are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/model.html#Model.cbGetNodeRel">Model.cbGetNodeRel()</a>:
retrieve the values of the variables in the node relaxation solution at
the current node.</p>
</li>
<li>
<p><a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/model.html#Model.cbGetSolution">Model.cbGetSolution()</a>:
retrieve the values of the variables in the new MIP solution.</p>
</li>
<li>
<p><a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/model.html#Model.cbCut">Model.cbCut()</a>: add a
new cutting plane to the model.</p>
</li>
<li>
<p><a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/model.html#Model.cbLazy">Model.cbLazy()</a>: add
a new lazy constraint to the model.</p>
</li>
<li>
<p><a href="https://docs.gurobi.com/projects/optimizer/en/12.0/reference/python/model.html#Model.cbSetSolution">Model.cbSetSolution()</a>:
import a user-constructed solution into Gurobi.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_requirements_and_installation">9. Requirements and installation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_setup_for_windows">9.1. Setup for Windows</h3>
<div class="sect3">
<h4 id="_check_for_anaconda_3_9_to_3_12">9.1.1. Check for Anaconda 3.9 to 3.12</h4>
<div class="paragraph">
<p>If you have Anaconda Python installed and this is version 3.9, 3.10,
3.11 or 3.12, just go ahead and run</p>
</div>
<div class="listingblock">
<div class="content">
<pre>conda install -c gurobi gurobipy</pre>
</div>
</div>
<div class="paragraph">
<p>You can now go directly to section <a href="#verify-installation">Verification of the installation</a>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect3">
<h4 id="_check_for_the_py_launcher">9.1.2. Check for the <code>py</code> launcher</h4>
<div class="paragraph">
<p>Check whether you already have a 'core' Python version installed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>open a Command Prompt and run</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>py --list</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code>py --list</code> tells you that you have version 3.9, 3.10, 3.11 or
3.12, you can go ahead to the <a href="#install-gurobipy">Installation of Gurobipy</a> section below.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
<div class="ulist">
<ul>
<li>
<p>If you get</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>'py' is not recognized as an internal or external command,
operable program or batch file.</pre>
</div>
</div>
<div class="paragraph">
<p>then you need to install Python 3.12, as per the next section.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect3">
<h4 id="_install_python_3_12">9.1.3. Install Python 3.12</h4>
<div class="paragraph">
<p>If you have none of 3.9, 3.10, 3.11 or 3.12, install the latest 3.12 Python version from <a href="https://www.python.org/downloads/windows/" class="bare">https://www.python.org/downloads/windows/</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Download the 'Windows installer (64-bit)', unless you have an ARM machine</p>
</li>
<li>
<p>Run the installer (you don&#8217;t need to do it as an Administrator)</p>
</li>
<li>
<p>Make sure that 'Add Python 3.12 to the path' is NOT checked (so that your access to your existing Python version is not changed)</p>
</li>
<li>
<p>open a Command Prompt and run</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>py --list</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Verify that you have 3.12 listed</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more details on the installation process, refer to <a href="https://docs.python.org/3.12/using/windows.html" class="bare">https://docs.python.org/3.12/using/windows.html</a>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect3">
<h4 id="_create_a_venv_and_activate_it">9.1.4. Create a venv and activate it</h4>
<div class="paragraph">
<p>The reason to create a <code>venv</code> is to fix the Python version and isolate the work
done in the venv to make sure it doesn&#8217;t impact the rest of your system.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In a Command Prompt, run</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>md gurobipy-course
cd gurobipy-course
py -3.12 -m venv venv --prompt "gurobipy-course"</pre>
</div>
</div>
<div class="paragraph">
<p>Now that the venv has been created, you can activate it with one of the commands below.
Note that you should always do this in any new Command Prompt window that you start.</p>
</div>
<div class="paragraph">
<p>If you use PowerShell (e.g. your prompt starts with <code>PS C:...&gt;</code>), use</p>
</div>
<div class="listingblock">
<div class="content">
<pre>.\venv\Scripts\Activate.ps1</pre>
</div>
</div>
<div class="paragraph">
<p>If you use <code>cmd</code> (no <code>PS</code> at the start of your prompt), use</p>
</div>
<div class="listingblock">
<div class="content">
<pre>venv\Scripts\activate</pre>
</div>
</div>
<div class="paragraph">
<p>After activation of a virtual environment, <code>python</code> and <code>pip</code> <em>in
that window</em> refer to that environment, not the default system-wide
installation.  You can now continue in <a href="#install-gurobipy">Installation of Gurobipy</a>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_setup_for_macos">9.2. Setup for macOS</h3>
<div class="ulist">
<ul>
<li>
<p>I will assume here that you have already installed
<a href="https://brew.sh">Homebrew</a>. Otherwise, follow the instructions there.</p>
</li>
<li>
<p>Install <code>pyenv</code> and Python 3.12</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>brew install pyenv
pyenv install 3.12</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a local directory for the course.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>mkdir gurobipy-course
cd gurobipy-course</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Configure pyenv to use Python 3.12 when in this directory.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>pyenv local 3.12</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a virtual environmnent for the course and activate it. From now on,
remember to always activate your venv in whatever shell you use.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>python -m venv venv --prompt "gurobipy-course"
source venv/bin/activate</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>I also highly recommend that you set the variable
<code>PIP_REQUIRE_VIRTUALENV=true</code> in your environment. This forces <code>pip</code>
to fail when not running in a virtual environment.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="install-gurobipy">9.3. Installation of Gurobipy</h3>
<div class="paragraph">
<p>Confirm that your venv is active: you should see that your prompt is modified to mention 'gurobipy-course'.
With your venv activated, confirm that</p>
</div>
<div class="listingblock">
<div class="content">
<pre>python --version</pre>
</div>
</div>
<div class="paragraph">
<p>runs Python 3.12</p>
</div>
<div class="paragraph">
<p>You can now run</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pip install gurobipy</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="verify-installation">9.4. Verification of the installation</h3>
<div class="paragraph">
<p>You can check that gurobipy is correctly installed by running</p>
</div>
<div class="listingblock">
<div class="content">
<pre>python -c "import gurobipy as gp; m = gp.Model(); print(gp.GRB.VERSION_MAJOR)"</pre>
</div>
</div>
<div class="paragraph">
<p>This should output one or a few lines about your license, then the Gurobi version number, which should be 12 at this time. An example could be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Restricted license - for non-production use only - expires 2026-11-23
12</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_get_a_free_gurobi_license">9.5. Get a free Gurobi license</h3>
<div class="ulist">
<ul>
<li>
<p>Using your academic email address, create an account on <a href="https://portal.gurobi.com" class="bare">https://portal.gurobi.com</a>.</p>
</li>
<li>
<p><strong>From a computer that belongs to your University</strong>, log onto <a href="https://portal.gurobi.com/iam/licenses/request?type=academic" class="bare">https://portal.gurobi.com/iam/licenses/request?type=academic</a> and request a 'WLS Academic' license</p>
</li>
<li>
<p>Once you see your license at <a href="https://portal.gurobi.com/iam/licenses/list" class="bare">https://portal.gurobi.com/iam/licenses/list</a>, open <a href="https://license.gurobi.com/manager/licenses/" class="bare">https://license.gurobi.com/manager/licenses/</a>, click 'Download' at the bottom of the license card, give a name and a description to the API key that you&#8217;re about to create.</p>
</li>
<li>
<p>When the 'API key created' dialog appears, click the 'Download' button and save the 'gurobi.lic' file.</p>
</li>
<li>
<p>Copy that file to your laptop, in your user profile folder (typically <code>C:\Users\[name]</code>)</p>
</li>
<li>
<p>Verify that running</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>python -c "import gurobipy as gp; m = gp.Model()"</pre>
</div>
</div>
<div class="paragraph">
<p>does <strong>not</strong> give you any more the 'Restricted license' message.</p>
</div>
<div class="paragraph">
<p>For more details, refer to <a href="https://support.gurobi.com/hc/en-us/articles/13232844297489-How-do-I-set-up-a-Web-License-Service-WLS-license">this page</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-10-02 11:16:31 +0200
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>